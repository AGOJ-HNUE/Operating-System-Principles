<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGOJ LAB - Nguyên lý Hệ điều hành</title>

    <link rel="icon" href="AGOJ - logo.png" type="icon/png">


    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@400;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            /* Slate 50 - Trắng dịu */
            color: #1e293b;
            /* Slate 800 */
        }

        h1,
        h2,
        h3,
        h4 {
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        /* --- ANIMATIONS & EFFECTS --- */
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        .slide-up {
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(12px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 3D Flip Card */
        .perspective-1000 {
            perspective: 1000px;
        }

        .transform-style-3d {
            transform-style: preserve-3d;
        }

        .backface-hidden {
            backface-visibility: hidden;
        }

        .rotate-y-180 {
            transform: rotateY(180deg);
        }

        /* Sidebar & Panels */
        .glass-sidebar {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border-right: 1px solid #e2e8f0;
        }

        .content-card {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.02);
            border-radius: 1.5rem;
        }

        .term-highlight {
            cursor: pointer;
            border-bottom: 2px solid #e2e8f0;
            color: #4f46e5;
            /* Indigo 600 */
            font-weight: 600;
            transition: all 0.2s ease;
            display: inline;
        }

        .term-highlight:hover {
            background-color: #f5f3ff;
            border-bottom-color: #6366f1;
        }

        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }

        /* Custom Scrollbar cho Sidebar sáng */
        .custom-scrollbar-light::-webkit-scrollbar {
            width: 5px;
        }

        .custom-scrollbar-light::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scrollbar-light::-webkit-scrollbar-thumb {
            background: #e2e8f0;
            border-radius: 10px;
        }

        .custom-scrollbar-light::-webkit-scrollbar-thumb:hover {
            background: #cbd5e1;
        }

        .pyramid-level {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
        }

        .pyramid-level:hover {
            transform: scale(1.02) translateX(5px);
            filter: brightness(1.05);
            z-index: 10;
        }

        .kbd-hint {
            display: inline-flex;
            align-items: center;
            padding: 2px 6px;
            font-family: monospace;
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            font-size: 10px;
            color: #64748b;
            margin: 0 2px;
        }

        /* Hiệu ứng Tooltip hiện đại */
        @keyframes tooltipBounce {
            0% {
                opacity: 0;
                transform: translateX(-50%) translateY(10px) scale(0.95);
            }

            100% {
                opacity: 1;
                transform: translateX(-50%) translateY(0) scale(1);
            }
        }

        .tooltip-glass {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(226, 232, 240, 0.8);
            animation: tooltipBounce 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        /* Mũi tên tinh tế hơn */
        .tooltip-arrow-custom {
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 12px;
            background: white;
            border-left: 1px solid rgba(226, 232, 240, 0.8);
            border-top: 1px solid rgba(226, 232, 240, 0.8);
            rotate: 45deg;
            z-index: 0;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useContext, createContext } = React;

        // --- 1. DATA: VOCABULARY DICTIONARY ---
        // Dữ liệu từ vựng chuyên ngành
        const vocabData = {
            "operating system": { ipa: "/ˈɒp.ər.eɪ.tɪŋ ˌsɪs.təm/", type: "noun", vi: "Hệ điều hành", desc: "Chương trình quản lý phần cứng và cung cấp môi trường cho ứng dụng chạy." },
            "intermediary": { ipa: "/ˌɪn.təˈmiː.di.ə.ri/", type: "adj/noun", vi: "Trung gian", desc: "Đóng vai trò cầu nối, ở giữa hai thực thể (User & Hardware)." },
            "convenience": { ipa: "/kənˈviː.ni.əns/", type: "noun", vi: "Sự tiện dụng", desc: "Mục tiêu chính của Hệ Điều Hành ở góc độ người dùng." },
            "efficiency": { ipa: "/ɪˈfɪʃ.ən.si/", type: "noun", vi: "Hiệu năng", desc: "Sử dụng tài nguyên hệ thống một cách tối ưu, tránh lãng phí." },
            "resource allocator": { ipa: "/rɪˈzɔːs ˈæl.ə.keɪ.tər/", type: "noun", vi: "Bộ phân phối tài nguyên", desc: "Chức năng quản lý CPU, RAM, Disk của Hệ Điều Hành." },
            "control program": { ipa: "/kənˈtrəʊl ˈprəʊ.ɡræm/", type: "noun", vi: "Chương trình điều khiển", desc: "Giám sát thực thi, ngăn ngừa lỗi và sử dụng sai hệ thống." },
            "interrupt": { ipa: "/ˈɪn.tə.rʌpt/", type: "noun", vi: "Ngắt", desc: "Tín hiệu từ phần cứng/phần mềm gửi đến CPU để yêu cầu xử lý ngay." },
            "volatile": { ipa: "/ˈvɒl.ə.taɪl/", type: "adj", vi: "Khả biến / Bay hơi", desc: "Mất dữ liệu khi mất nguồn điện (RAM, Cache)." },
            "non-volatile": { ipa: "/ˌnɒnˈvɒl.ə.taɪl/", type: "adj", vi: "Bất biến", desc: "Lưu dữ liệu vĩnh viễn (HDD, SSD, ROM)." },
            "throughput": { ipa: "/ˈθruː.pʊt/", type: "noun", vi: "Thông lượng", desc: "Số lượng công việc hoàn thành trong một đơn vị thời gian." },
            "dual mode": { ipa: "/ˈduː.əl məʊd/", type: "noun", vi: "Chế độ kép", desc: "Cơ chế User Mode & Kernel Mode để bảo vệ hệ thống." },
            "system call": { ipa: "/ˈsɪs.təm kɔːl/", type: "noun", vi: "Lời gọi hệ thống", desc: "Giao diện để User Program yêu cầu dịch vụ từ Kernel." },
            "multiprocessor": { ipa: "/ˌmʌl.tiˈprəʊ.ses.ər/", type: "noun", vi: "Đa bộ xử lý", desc: "Hệ thống có nhiều CPU cùng chia sẻ bus, clock, memory." },
            "clustered": { ipa: "/ˈklʌs.təd/", type: "adj", vi: "Gom cụm", desc: "Nhiều hệ thống độc lập kết nối qua mạng (LAN) để làm việc chung." },
            "timer": {
                ipa: "/ˈtaɪ.mər/",
                type: "noun",
                vi: "Bộ định thời",
                desc: "Cơ chế phần cứng tạo ngắt định kỳ để đảm bảo Hệ Điều Hành duy trì quyền kiểm soát CPU, ngăn chặn tiến trình chiếm giữ quá lâu."
            },
            "privileged instruction": {
                ipa: "/ˈprɪv.əl.ɪdʒd ɪnˈstrʌk.sən/",
                type: "noun",
                vi: "Lệnh đặc quyền",
                desc: "Các lệnh nhạy cảm (như thiết lập Timer, I/O) chỉ được phép thực thi ở Kernel Mode để bảo vệ an toàn cho toàn bộ hệ thống."
            }
        };

        // --- 2. ICONS (Lucide React style) ---
        const Icon = ({ children, size = 20, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const BookOpen = (p) => <Icon {...p}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" /><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" /></Icon>;
        const Cpu = (p) => <Icon {...p}><rect x="4" y="4" width="16" height="16" rx="2" ry="2" /><rect x="9" y="9" width="6" height="6" /><path d="M9 1v3" /><path d="M15 1v3" /><path d="M9 20v3" /><path d="M15 20v3" /><path d="M20 9h3" /><path d="M20 14h3" /><path d="M1 9h3" /><path d="M1 14h3" /></Icon>;
        const HardDrive = (p) => <Icon {...p}><line x1="22" y1="12" x2="2" y2="12" /><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z" /><line x1="6" y1="16" x2="6.01" y2="16" /><line x1="10" y1="16" x2="10.01" y2="16" /></Icon>;
        const Layers = (p) => <Icon {...p}><polygon points="12 2 2 7 12 12 22 7 12 2" /><polyline points="2 17 12 22 22 17" /><polyline points="2 12 12 17 22 12" /></Icon>;
        const Activity = (p) => <Icon {...p}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12" /></Icon>;
        const CheckSquare = (p) => <Icon {...p}><polyline points="9 11 12 14 22 4" /><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" /></Icon>;
        const Zap = (p) => <Icon {...p}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" /></Icon>;
        const Shield = (p) => <Icon {...p}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" /></Icon>;
        const BrainCircuit = (p) => <Icon {...p}><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z" /><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z" /><path d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4" /><path d="M17.599 6.5a3 3 0 0 0 .399-1.375" /><path d="M6.003 5.125A3 3 0 0 0 6.401 6.5" /><path d="M3.477 10.896a4 4 0 0 1 .585-.396" /><path d="M19.938 10.5a4 4 0 0 1 .585.396" /><path d="M6 18a4 4 0 0 1-1.97-3.284" /><path d="M17.97 14.716A4 4 0 0 1 18 18" /></Icon>;
        const Volume2 = (p) => <Icon {...p}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" /><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07" /></Icon>;
        const RefreshCcw = (p) => <Icon {...p}><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" /><path d="M3 3v5h5" /><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16" /><path d="M16 16h5v5" /></Icon>;

        // --- 3. CONTEXT & PROVIDER FOR TOOLTIPS ---
        const TooltipContext = createContext();

        const TooltipProvider = ({ children }) => {
            const [tooltip, setTooltip] = useState(null);

            const showTooltip = (termKey, rect) => {
                const data = vocabData[termKey.toLowerCase()];
                if (data) {
                    setTooltip({
                        term: termKey,
                        data: data,
                        x: rect.left + (rect.width / 2),
                        y: rect.bottom
                    });
                }
            };

            const hideTooltip = () => setTooltip(null);

            const speak = (text) => {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                window.speechSynthesis.speak(utterance);
            };

            return (
                <TooltipContext.Provider value={{ showTooltip, hideTooltip, speak }}>
                    {children}
                    {tooltip && ReactDOM.createPortal(
                        <div
                            className="fixed z-[9999] pointer-events-none"
                            style={{
                                left: `${tooltip.x}px`,
                                top: `${tooltip.y + 14}px`,
                                willChange: 'transform, opacity'
                            }}
                        >
                            <div className="tooltip-glass p-5 rounded-2xl shadow-[0_10px_30px_-5px_rgba(0,0,0,0.1)] w-80 relative">
                                {/* Mũi tên */}
                                <div className="tooltip-arrow-custom"></div>

                                <div className="relative z-10">
                                    <div className="flex justify-between items-start mb-3">
                                        <div>
                                            <h3 className="text-xl font-black text-indigo-600 capitalize leading-none tracking-tight">
                                                {tooltip.term}
                                            </h3>
                                            <div className="flex items-center gap-2 mt-2">
                                                <span className="font-mono text-xs text-slate-400 font-medium">
                                                    {tooltip.data.ipa}
                                                </span>
                                                <button
                                                    className="text-indigo-400 hover:text-indigo-600 transition-colors pointer-events-auto"
                                                    onClick={() => speak(tooltip.term)}
                                                >
                                                    <Volume2 size={14} />
                                                </button>
                                            </div>
                                        </div>
                                        <span className="text-[10px] bg-indigo-50 text-indigo-500 px-2 py-0.5 rounded-lg font-black uppercase tracking-wider">
                                            {tooltip.data.type}
                                        </span>
                                    </div>

                                    <div className="bg-slate-50/80 rounded-xl p-3 mb-3 border border-slate-100">
                                        <p className="font-bold text-slate-800 text-base">
                                            {tooltip.data.vi}
                                        </p>
                                    </div>

                                    <p className="text-sm text-slate-500 leading-relaxed italic">
                                        {tooltip.data.desc}
                                    </p>
                                </div>
                            </div>
                        </div>,
                        document.body
                    )}
                </TooltipContext.Provider>
            );
        };

        const Term = ({ children, k }) => {
    const { showTooltip, hideTooltip, speak } = useContext(TooltipContext); // Thêm speak vào đây
    const key = k || children;

    return (
        <span 
            className="term-highlight" 
            onMouseEnter={(e) => showTooltip(key, e.target.getBoundingClientRect())} 
            onMouseLeave={hideTooltip}
            onClick={() => speak(key)} // Thêm dòng này: Click để phát âm
        >
            {children}
        </span>
    );
};

        // --- 4. COMPONENTS ---

        // Sidebar
        const Sidebar = ({ activeTab, setActiveTab }) => {
            const menuItems = [
                { id: 'overview', label: '1. Tổng quan & Định nghĩa', icon: <BookOpen /> },
                { id: 'internals', label: '2. Cơ chế Ngắt (Interrupt)', icon: <Zap /> },
                { id: 'storage', label: '3. Cấu trúc Lưu trữ', icon: <HardDrive /> },
                { id: 'architecture', label: '4. Kiến trúc Hệ thống', icon: <Layers /> },
                { id: 'operations', label: '5. Dual Mode & Timer', icon: <Shield /> },
                { id: 'english', label: '6. Tiếng Anh chuyên ngành', icon: <BrainCircuit /> },
                { id: 'quiz', label: '7. Kiểm tra kiến thức', icon: <CheckSquare /> },
            ];

            return (
                <div className="w-full md:w-80 bg-white border-r border-slate-200 flex flex-col h-auto md:h-screen sticky top-0 z-50 shadow-[4px_0_24px_rgba(0,0,0,0.02)]">
                    {/* Logo Section */}
                    <div className="p-8 border-b border-slate-50 flex flex-col gap-1">
                        <div className="flex items-center gap-4">
                            {/* Logo Container - Không background, chỉ hiệu ứng Zoom */}
                            <div className="w-12 h-12 flex items-center justify-center">
                                <img
                                    src="./HNUE.png"
                                    alt="HNUE Logo"
                                    className="w-full h-full object-contain transition-transform duration-300 hover:scale-125 cursor-pointer"
                                />
                            </div>

                            <div className="flex flex-col">
                                <h1 className="text-2xl font-black text-slate-800 tracking-tighter leading-tight">
                                    AGOJ - LAB
                                </h1>
                                <span className="text-[9px] font-bold text-slate-400 uppercase tracking-[0.2em]">Môn: Nguyên lý hệ điều hành</span>
                            </div>
                        </div>

                        {/* Status Tag */}
                        <div className="flex items-center gap-2 mt-5 px-3 py-1.5 bg-emerald-50 w-fit rounded-xl border border-emerald-100">
                            <div className="relative flex h-2 w-2">
                                <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                                <span className="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
                            </div>
                            <span className="text-[10px] font-black text-emerald-700 uppercase tracking-widest">
                                Chương 1: Hệ điều hành
                            </span>
                        </div>
                    </div>

                    {/* Navigation Section */}
                    <nav className="flex-1 overflow-y-auto py-6 px-4 space-y-2 custom-scrollbar-light">
                        {menuItems.map((item) => {
                            const isActive = activeTab === item.id;
                            return (
                                <button
                                    key={item.id}
                                    onClick={() => setActiveTab(item.id)}
                                    className={`w-full flex items-center px-4 py-4 rounded-2xl transition-all duration-300 group relative
                                ${isActive
                                            ? 'bg-indigo-600 text-white shadow-xl shadow-indigo-100 translate-x-1'
                                            : 'text-slate-500 hover:bg-slate-50 hover:text-indigo-600 hover:translate-x-1'
                                        }`}
                                >
                                    {/* Active Indicator Line */}
                                    {isActive && (
                                        <div className="absolute left-0 w-1 h-6 bg-white rounded-full opacity-50"></div>
                                    )}

                                    <span className={`mr-4 transition-colors duration-300 ${isActive ? 'text-white' : 'text-slate-400 group-hover:text-indigo-600'}`}>
                                        {React.cloneElement(item.icon, { size: 22, strokeWidth: isActive ? 2.5 : 2 })}
                                    </span>

                                    <span className={`text-sm font-bold tracking-tight ${isActive ? 'text-white' : 'text-slate-600 group-hover:text-indigo-600'}`}>
                                        {item.label}
                                    </span>

                                    {!isActive && (
                                        <div className="ml-auto opacity-0 group-hover:opacity-100 transition-opacity">
                                            <Icon size={16}><path d="M9 18l6-6-6-6" /></Icon>
                                        </div>
                                    )}
                                </button>
                            );
                        })}
                    </nav>

                    {/* User Info / Footer Sidebar */}
                    <div className="p-6 bg-slate-50/50 border-t border-slate-100">
                        <div className="flex items-center gap-3 p-3 bg-white rounded-2xl border border-slate-100 shadow-sm">
                            {/* Container Logo */}
                            <div className="w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold shadow-inner overflow-hidden">
                                {/* Sửa lỗi: Thêm dấu /> ở cuối thẻ img */}
                                <img
                                    src="./AGOJ - logo.png"
                                    alt="Logo"
                                    className="w-full h-full object-cover"
                                />
                            </div>

                            {/* Thông tin lớp học */}
                            <div className="flex flex-col">
                                <span className="text-xs font-black text-slate-800 tracking-wide uppercase">
                                    Lớp A1K75
                                </span>
                                <span className="text-[10px] font-bold text-slate-400 uppercase tracking-tighter">
                                    Sư phạm Tin học
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Section: Overview
        const Overview = () => {
            return (
                <div className="space-y-8 fade-in max-w-5xl mx-auto pb-10">
                    {/* Definition Block */}
                    <div className="bg-white p-8 rounded-2xl shadow-sm border border-slate-100 relative overflow-hidden">
                        <div className="absolute top-0 right-0 w-32 h-32 bg-indigo-50 rounded-full blur-3xl -mr-10 -mt-10"></div>

                        <h2 className="text-3xl font-bold text-slate-800 mb-6 flex items-center relative z-10">
                            <BookOpen className="mr-3 text-indigo-600" size={32} />
                            <span>
                                <Term>Operating System</Term> là gì?
                            </span>
                        </h2>

                        <div className="grid md:grid-cols-2 gap-10">
                            <div className="space-y-6">
                                <p className="text-slate-700 leading-relaxed text-lg">
                                    Hệ điều hành (OS) là chương trình <Term>intermediary</Term> (trung gian) giữa phần cứng máy tính và người sử dụng.
                                </p>
                                <div className="space-y-4">
                                    <div className="bg-emerald-50 p-5 rounded-xl border-l-4 border-emerald-500 transition-transform hover:scale-[1.02]">
                                        <h3 className="font-bold text-emerald-800 text-sm uppercase mb-1 flex justify-between">
                                            Góc nhìn Người dùng
                                            <span className="text-xs bg-emerald-200 px-2 rounded text-emerald-800">User View</span>
                                        </h3>
                                        <p className="text-emerald-900 mt-1">Mục tiêu là <Term>Convenience</Term>. Che giấu sự phức tạp của phần cứng, giúp người dùng thao tác dễ dàng.</p>
                                    </div>
                                    <div className="bg-blue-50 p-5 rounded-xl border-l-4 border-blue-500 transition-transform hover:scale-[1.02]">
                                        <h3 className="font-bold text-blue-800 text-sm uppercase mb-1 flex justify-between">
                                            Góc nhìn Hệ thống
                                            <span className="text-xs bg-blue-200 px-2 rounded text-blue-800">System View</span>
                                        </h3>
                                        <p className="text-blue-900 mt-1">Mục tiêu là <Term>Efficiency</Term>. Quản lý tài nguyên (CPU, RAM, Disk) sao cho tối ưu nhất.</p>
                                    </div>
                                </div>
                            </div>

                            <div className="relative flex flex-col justify-center items-center space-y-3 p-4 bg-slate-50 rounded-xl border border-dashed border-slate-200">
                                <span className="absolute top-2 left-4 text-xs font-bold text-slate-400 uppercase tracking-widest">Abstraction Layer</span>

                                <div className="w-full max-w-xs p-3 bg-white text-slate-700 rounded-lg text-center border border-slate-200 font-semibold shadow-sm hover:-translate-y-1 transition-transform cursor-pointer" title="Người sử dụng máy tính">User</div>
                                <div className="h-4 w-0.5 bg-slate-300"></div>
                                <div className="w-full max-w-xs p-3 bg-green-100 text-green-800 rounded-lg text-center border border-green-200 font-semibold shadow-sm hover:-translate-y-1 transition-transform">Applications (Word, Web, Games)</div>
                                <div className="h-4 w-0.5 bg-slate-300"></div>

                                {/* OS Highlight */}
                                <div className="w-full max-w-xs p-5 bg-gradient-to-r from-indigo-600 to-blue-600 text-white rounded-xl text-center font-bold shadow-lg shadow-indigo-200 transform scale-110 z-10 ring-4 ring-white">
                                    OPERATING SYSTEM
                                    <div className="text-[10px] font-medium opacity-90 mt-2 flex justify-center gap-3">
                                        <span className="bg-white/20 px-2 py-0.5 rounded">Resource Allocator</span>
                                        <span className="bg-white/20 px-2 py-0.5 rounded">Control Program</span>
                                    </div>
                                </div>

                                <div className="h-4 w-0.5 bg-slate-300"></div>
                                <div className="w-full max-w-xs p-3 bg-slate-800 text-slate-200 rounded-lg text-center border border-slate-700 font-semibold shadow-sm">Hardware (CPU, RAM, I/O)</div>
                            </div>
                        </div>
                    </div>

                    <div className="grid md:grid-cols-2 gap-6">
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow">
                            <h3 className="font-bold text-slate-800 mb-3 flex items-center text-lg">
                                <span className="bg-orange-100 text-orange-600 p-2 rounded-lg mr-3"><Activity size={20} /></span>
                                <Term>Resource Allocator</Term>
                            </h3>
                            <p className="text-slate-600 leading-relaxed">
                                Máy tính có nhiều tài nguyên giới hạn (CPU time, dung lượng RAM, băng thông đĩa). OS đóng vai trò như người quản lý, quyết định chương trình nào được dùng tài nguyên nào, trong bao lâu, để tránh xung đột.
                            </p>
                        </div>
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow">
                            <h3 className="font-bold text-slate-800 mb-3 flex items-center text-lg">
                                <span className="bg-indigo-100 text-indigo-600 p-2 rounded-lg mr-3"><Shield size={20} /></span>
                                <Term>Control Program</Term>
                            </h3>
                            <p className="text-slate-600 leading-relaxed">
                                Kiểm soát việc thực thi của các chương trình người dùng để ngăn chặn lỗi (errors) và việc sử dụng máy tính sai mục đích (improper use), đảm bảo sự vận hành trơn tru.
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        // Section: Internals (Simulation)
        const Internals = () => {
            const [step, setStep] = useState(0);
            const [logs, setLogs] = useState([]);

            const steps = [
                { id: 0, text: "CPU đang thực thi User Program.", status: "User Mode" },
                { id: 1, text: "Thiết bị I/O gửi tín hiệu Ngắt (Interrupt Signal).", status: "Hardware Signal" },
                { id: 2, text: "OS dừng User Program. Lưu trạng thái vào Stack.", status: "Kernel Mode" },
                { id: 3, text: "OS tra bảng Vector Ngắt để tìm ISR. Thực thi ISR.", status: "Executing ISR" },
                { id: 4, text: "OS khôi phục trạng thái. Trả quyền cho User Program.", status: "Restore Context" }
            ];

            const runSimulation = () => {
                if (step !== 0) return;
                setLogs([]);
                let currentStep = 0;

                const interval = setInterval(() => {
                    currentStep++;
                    setStep(currentStep);
                    setLogs(prev => [...prev, { time: new Date().toLocaleTimeString('vi-VN'), msg: steps[currentStep].text }]);

                    if (currentStep === 4) {
                        clearInterval(interval);
                        setTimeout(() => {
                            setStep(0);
                            setLogs(prev => [...prev, { time: new Date().toLocaleTimeString('vi-VN'), msg: "Hoàn tất. CPU tiếp tục công việc cũ." }]);
                        }, 2500);
                    }
                }, 1500);
            };

            return (
                <div className="space-y-8 fade-in max-w-5xl mx-auto pb-10">
                    <div className="bg-white p-8 rounded-2xl shadow-sm border border-slate-200">
                        <h2 className="text-2xl font-bold text-slate-800 mb-4 flex items-center">
                            <Zap className="mr-3 text-yellow-500" size={24} />
                            <span> Cơ chế <Term>Interrupt</Term> (Ngắt) </span>
                        </h2>
                        <div className="bg-indigo-50 border-l-4 border-indigo-500 p-4 rounded-r mb-8">
                            <p className="text-indigo-900 text-sm"><strong>Khái niệm cốt lõi:</strong> Hệ Điều Hành hiện đại hoạt động <strong>định hướng theo ngắt (Interrupt driven)</strong>. CPU sẽ không ngồi chờ (poll) thiết bị ngoại vi làm việc xong, mà nó sẽ làm việc khác. Khi thiết bị xong việc, nó sẽ "gõ vai" CPU bằng một tín hiệu điện.</p>
                        </div>

                        <div className="grid md:grid-cols-2 gap-8 h-[400px]">
                            {/* Visual Simulation */}
                            <div className="bg-slate-50 p-6 rounded-xl border border-slate-200 relative overflow-hidden flex flex-col items-center justify-between">
                                {/* User Program Box */}
                                <div className={`w-56 p-4 rounded-xl border-2 transition-all duration-500 text-center ${step === 0 ? 'bg-white border-blue-500 shadow-lg scale-105' : 'bg-slate-200 border-slate-300 opacity-60 scale-95'}`}>
                                    <div className="font-bold text-slate-800 flex items-center justify-center gap-2"><Activity size={16} /> User Program</div>
                                    <div className="text-xs text-slate-500 mt-2 h-4">
                                        {step === 0 ? <span className="animate-pulse text-blue-600 font-semibold">● Đang tính toán...</span> : "Đã tạm dừng"}
                                    </div>
                                </div>

                                {/* Interrupt Signal Wire */}
                                <div className="flex-1 w-full flex items-center justify-center relative my-4">
                                    {step >= 1 && step < 4 && (
                                        <div className="absolute left-10 top-1/2 -translate-y-1/2 flex items-center text-red-500 font-bold text-xs animate-bounce z-20">
                                            <span className="mr-2 bg-red-100 px-2 py-1 rounded shadow-sm border border-red-200">INTERRUPT!</span>
                                            <div className="h-0.5 w-16 bg-red-500"></div>
                                            <div className="w-0 h-0 border-t-4 border-t-transparent border-l-[8px] border-l-red-500 border-b-4 border-b-transparent"></div>
                                        </div>
                                    )}
                                    <div className="h-full w-1 bg-slate-200 rounded-full"></div>
                                </div>

                                {/* OS Kernel Box */}
                                <div className={`w-56 p-4 rounded-xl border-2 transition-all duration-500 text-center ${step >= 2 ? 'bg-white border-emerald-500 shadow-xl scale-110 ring-4 ring-emerald-50 z-10' : 'bg-slate-200 border-slate-300 text-slate-400 scale-95'}`}>
                                    <div className="font-bold flex items-center justify-center gap-2"><Cpu size={16} /> OS Kernel (ISR)</div>
                                    <div className="text-xs mt-2 font-mono h-4">
                                        {step === 2 && "Saving State..."}
                                        {step === 3 && "Processing I/O..."}
                                        {step === 4 && "Restoring State..."}
                                        {step < 2 && "Idle / Sleeping"}
                                    </div>
                                </div>

                                {/* Control Button */}
                                <div className="absolute top-4 right-4">
                                    <button
                                        onClick={runSimulation}
                                        disabled={step !== 0}
                                        className={`px-4 py-2 rounded-lg text-xs font-bold text-white shadow-md transition-all ${step !== 0 ? 'bg-slate-400 cursor-not-allowed' : 'bg-red-500 hover:bg-red-600 hover:shadow-red-200 active:scale-95'}`}
                                    >
                                        Tạo Ngắt Giả Lập
                                    </button>
                                </div>
                            </div>

                            {/* System Log */}
                            <div className="flex flex-col h-full bg-slate-900 rounded-xl overflow-hidden shadow-inner border border-slate-800">
                                <div className="bg-slate-950 p-3 border-b border-slate-800 flex justify-between items-center">
                                    <h3 className="font-bold text-slate-400 text-xs uppercase tracking-wider flex items-center"><Icon size={14} className="mr-2" />System Log</h3>
                                    <div className="flex gap-1.5">
                                        <div className="w-2.5 h-2.5 rounded-full bg-red-500"></div>
                                        <div className="w-2.5 h-2.5 rounded-full bg-yellow-500"></div>
                                        <div className="w-2.5 h-2.5 rounded-full bg-green-500"></div>
                                    </div>
                                </div>
                                <div className="flex-1 p-4 font-mono text-xs overflow-y-auto custom-scrollbar">
                                    {logs.length === 0 && <span className="text-slate-600 italic">// Waiting for system events...</span>}
                                    {logs.map((log, idx) => (
                                        <div key={idx} className="mb-3 slide-up">
                                            <span className="text-slate-500 mr-2">[{log.time}]</span>
                                            <span className="text-emerald-400 font-semibold">root@kernel:~$</span>
                                            <span className="text-slate-300 ml-2">{log.msg}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Section: Storage
        const Storage = () => {
            const [selectedLevel, setSelectedLevel] = useState(null);

            const levels = [
                { id: 1, name: "Registers", examples: "AX, BX, PC, IR", speed: "< 1 ns", size: "< 1 KB", desc: "Nằm ngay trong nhân CPU. Tốc độ cực nhanh.", color: "bg-red-500", term: "volatile" },
                { id: 2, name: "Cache", examples: "L1, L2, L3", speed: "1 - 10 ns", size: "MBs", desc: "Bộ nhớ trung gian tốc độ cao. Nguyên lý cục bộ.", color: "bg-orange-500", term: "volatile" },
                { id: 3, name: "Main Memory", examples: "DDR4, DDR5 RAM", speed: "50 - 100 ns", size: "GBs", desc: "Nơi chứa chương trình đang chạy.", color: "bg-amber-400", term: "volatile" },
                { id: 4, name: "Electronic Disk", examples: "NVMe SSD", speed: "micro-seconds", size: "TBs", desc: "Lưu trữ thứ cấp nhanh. Chip Flash.", color: "bg-emerald-500", term: "non-volatile" },
                { id: 5, name: "Magnetic Disk", examples: "HDD 7200rpm", speed: "milli-seconds", size: "10 TB+", desc: "Lưu trữ cơ học. Dung lượng lớn, giá rẻ.", color: "bg-blue-600", term: "non-volatile" },
                { id: 6, name: "Optical / Tape", examples: "DVD, Backup Tape", speed: "seconds", size: "Huge", desc: "Lưu trữ cấp 3 (Tertiary) để sao lưu.", color: "bg-slate-600", term: "non-volatile" },
            ];

            return (
                <div className="space-y-8 fade-in max-w-5xl mx-auto pb-10">
                    <div className="bg-white p-8 rounded-2xl shadow-sm border border-slate-200">
                        <h2 className="text-2xl font-bold text-slate-800 mb-2">Cấu trúc Lưu trữ (Storage Hierarchy)</h2>
                        <p className="text-slate-500 text-sm mb-8">Bấm vào từng tầng tháp để xem chi tiết thông số.</p>

                        <div className="flex flex-col lg:flex-row gap-12 items-start">
                            {/* Pyramid Visualization */}
                            <div className="flex-1 flex flex-col items-center justify-center w-full">
                                {levels.map((lvl, idx) => (
                                    <div
                                        key={lvl.id}
                                        onClick={() => setSelectedLevel(lvl)}
                                        className={`pyramid-level mb-1.5 flex items-center justify-center text-xs font-bold text-white shadow-sm border-b border-white/10 backdrop-blur-sm
                                            ${lvl.color}
                                            ${selectedLevel?.id === lvl.id ? 'ring-4 ring-slate-200 scale-105 z-20 shadow-xl brightness-110' : 'opacity-90 hover:opacity-100'}
                                        `}
                                        style={{
                                            width: `${25 + idx * 15}%`,
                                            height: '50px',
                                            borderRadius: idx === 0 ? '12px 12px 4px 4px' : (idx === 5 ? '4px 4px 12px 12px' : '4px')
                                        }}
                                    >
                                        {lvl.name}
                                    </div>
                                ))}
                                <div className="w-full flex justify-between text-[10px] text-slate-400 mt-4 font-mono uppercase tracking-widest px-4">
                                    <div className="text-left">
                                        ↑ Speed<br />
                                        ↑ Cost/Bit
                                    </div>
                                    <div className="text-right">
                                        ↓ Size<br />
                                        ↓ Access Time
                                    </div>
                                </div>
                            </div>

                            {/* Detail Panel */}
                            <div className="flex-1 w-full h-full min-h-[320px]">
                                {selectedLevel ? (
                                    <div className="bg-white rounded-2xl border border-slate-100 p-6 shadow-xl h-full slide-up relative overflow-hidden group">
                                        <div className={`absolute top-0 left-0 w-2 h-full ${selectedLevel.color}`}></div>
                                        <div className={`absolute top-0 left-0 w-full h-1 ${selectedLevel.color} opacity-20`}></div>

                                        <h3 className="text-2xl font-bold text-slate-800 mb-6 pl-4 flex items-center">
                                            {selectedLevel.name}
                                        </h3>

                                        <div className="space-y-5 pl-4">
                                            <div>
                                                <span className="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Mô tả</span>
                                                <p className="text-slate-700 text-sm mt-1 leading-relaxed">{selectedLevel.desc}</p>
                                            </div>
                                            <div className="grid grid-cols-2 gap-4 bg-slate-50 p-4 rounded-xl border border-slate-100">
                                                <div>
                                                    <span className="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Ví dụ</span>
                                                    <div className="font-mono text-sm text-indigo-600 font-semibold">{selectedLevel.examples}</div>
                                                </div>
                                                <div>
                                                    <span className="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Tốc độ</span>
                                                    <div className="font-mono text-sm text-red-500 font-semibold">{selectedLevel.speed}</div>
                                                </div>
                                            </div>
                                            <div className="pt-2">
                                                <span className={`inline-flex items-center px-3 py-1 text-xs font-bold rounded-full ${selectedLevel.id <= 3 ? 'bg-red-100 text-red-700' : 'bg-emerald-100 text-emerald-700'}`}>
                                                    <div className={`w-2 h-2 rounded-full mr-2 ${selectedLevel.id <= 3 ? 'bg-red-500' : 'bg-emerald-500'}`}></div>
                                                    <Term>{selectedLevel.term}</Term>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="bg-slate-50 border-2 border-slate-200 border-dashed rounded-2xl h-full flex flex-col items-center justify-center text-slate-400 p-8 text-center transition-all hover:bg-slate-100">
                                        <HardDrive size={48} className="mb-4 opacity-20" />
                                        <p className="font-medium">Chọn một tầng tháp bên trái để phân tích kỹ thuật.</p>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Section: Architecture
        const Architecture = () => {
            const [view, setView] = useState('single');

            return (
                <div className="space-y-8 fade-in max-w-5xl mx-auto pb-10">
                    <div className="bg-white p-8 rounded-2xl shadow-sm border border-slate-200">
                        <h2 className="text-2xl font-bold text-slate-800 mb-6">Phân loại Kiến trúc Hệ thống</h2>

                        <div className="flex gap-1 bg-slate-100 p-1 rounded-xl mb-8 w-fit">
                            {[
                                { id: 'single', name: 'Single-Processor' },
                                { id: 'multi', name: 'Multiprocessor' },
                                { id: 'clustered', name: 'Clustered' }
                            ].map(tab => (
                                <button
                                    key={tab.id}
                                    onClick={() => setView(tab.id)}
                                    className={`px-5 py-2 text-sm font-semibold rounded-lg transition-all ${view === tab.id
                                        ? 'bg-white text-indigo-600 shadow-sm'
                                        : 'text-slate-500 hover:text-slate-700 hover:bg-slate-200/50'
                                        }`}
                                >
                                    {tab.name}
                                </button>
                            ))}
                        </div>

                        <div className="grid md:grid-cols-3 gap-8">
                            <div className="md:col-span-2 bg-slate-50 rounded-2xl border border-slate-200 p-8 flex items-center justify-center min-h-[300px] relative overflow-hidden">
                                <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/graphy.png')] opacity-10"></div>

                                {view === 'single' && (
                                    <div className="text-center slide-up relative z-10">
                                        <div className="p-4 bg-white border-2 border-slate-400 rounded-lg shadow-sm font-bold mb-2 w-32 mx-auto">CPU Core</div>
                                        <div className="h-8 w-1 bg-slate-400 mx-auto"></div>
                                        <div className="w-64 h-2 bg-slate-800 mx-auto rounded-full relative"><span className="absolute -top-5 w-full text-center text-[10px] text-slate-400">BUS</span></div>
                                        <div className="h-8 w-1 bg-slate-400 mx-auto"></div>
                                        <div className="p-4 bg-emerald-100 border-2 border-emerald-500 rounded-lg font-bold text-emerald-900 w-40 mx-auto">Main Memory</div>
                                    </div>
                                )}
                                {view === 'multi' && (
                                    <div className="text-center slide-up w-full relative z-10">
                                        <div className="flex justify-center gap-4 mb-4">
                                            <div className="p-3 bg-white border-2 border-indigo-500 rounded shadow-sm w-20 text-xs font-bold">CPU 0</div>
                                            <div className="p-3 bg-white border-2 border-indigo-500 rounded shadow-sm w-20 text-xs font-bold">CPU 1</div>
                                            <div className="text-slate-400 self-center">...</div>
                                            <div className="p-3 bg-white border-2 border-indigo-500 rounded shadow-sm w-20 text-xs font-bold">CPU N</div>
                                        </div>
                                        <div className="w-3/4 h-3 bg-slate-800 mx-auto rounded relative my-6 shadow-lg">
                                            <span className="absolute -top-5 left-1/2 -translate-x-1/2 text-[10px] bg-slate-200 px-2 rounded">Shared Interconnect</span>
                                        </div>
                                        <div className="p-4 bg-emerald-100 border-2 border-emerald-500 rounded-lg font-bold text-emerald-900 w-1/2 mx-auto shadow-sm">Shared Memory</div>
                                    </div>
                                )}
                                {view === 'clustered' && (
                                    <div className="text-center slide-up w-full relative z-10">
                                        <div className="flex justify-center gap-10 items-end mb-6">
                                            <div className="border-2 border-dashed border-slate-300 p-3 rounded-xl bg-white/80">
                                                <div className="text-[10px] font-bold mb-2 uppercase text-slate-500">Node 1</div>
                                                <div className="w-16 p-1 bg-indigo-100 text-[10px] border border-indigo-300 rounded mb-1">CPU</div>
                                                <div className="w-16 p-1 bg-emerald-100 text-[10px] border border-emerald-300 rounded">RAM</div>
                                            </div>
                                            <div className="h-1 w-16 bg-slate-800 mb-6 relative"><span className="absolute -top-4 w-full text-center text-[10px]">LAN</span></div>
                                            <div className="border-2 border-dashed border-slate-300 p-3 rounded-xl bg-white/80">
                                                <div className="text-[10px] font-bold mb-2 uppercase text-slate-500">Node 2</div>
                                                <div className="w-16 p-1 bg-indigo-100 text-[10px] border border-indigo-300 rounded mb-1">CPU</div>
                                                <div className="w-16 p-1 bg-emerald-100 text-[10px] border border-emerald-300 rounded">RAM</div>
                                            </div>
                                        </div>
                                        <div className="w-full border-t border-slate-300 pt-4">
                                            <div className="inline-block px-6 py-2 bg-purple-100 text-purple-800 rounded-full border border-purple-300 text-xs font-bold shadow-sm">SAN (Storage Area Network)</div>
                                        </div>
                                    </div>
                                )}
                            </div>

                            <div className="space-y-4">
                                <h3 className="font-bold text-slate-700 border-b pb-2">Đặc điểm chính</h3>
                                {view === 'single' && (
                                    <div className="text-sm space-y-3 slide-up">
                                        <div className="bg-white p-4 rounded-lg border border-slate-100 shadow-sm">
                                            <span className="font-bold text-slate-600 block mb-1">Cổ điển:</span>
                                            Chỉ có 1 bộ xử lý đa dụng chạy user process.
                                        </div>
                                    </div>
                                )}
                                {view === 'multi' && (
                                    <div className="text-sm space-y-3 slide-up">
                                        <div className="bg-emerald-50 p-4 rounded-lg border-l-4 border-emerald-500 text-emerald-900">
                                            <span className="font-bold block">Tăng <Term>Throughput</Term></span>
                                            Làm nhiều việc hơn trong cùng một khoảng thời gian.
                                        </div>
                                        <div className="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500 text-blue-900">
                                            <span className="font-bold block">Tăng Độ tin cậy</span>
                                            <Term>Graceful degradation</Term>: Nếu 1 CPU hỏng, hệ thống vẫn chạy (chậm đi).
                                        </div>
                                    </div>
                                )}
                                {view === 'clustered' && (
                                    <div className="text-sm space-y-3 slide-up">
                                        <div className="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500 text-purple-900">
                                            <span className="font-bold block">High Availability</span>
                                            Tính sẵn sàng cao. Một node sập, node khác thay thế.
                                        </div>
                                        <div className="bg-white p-4 rounded-lg border border-slate-100 shadow-sm">
                                            <span className="font-bold text-slate-600 block mb-1">Gom cụm:</span>
                                            Kết nối nhiều hệ thống độc lập qua mạng.
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Section: Operations (Dual Mode)
        const Operations = () => {
            const [mode, setMode] = useState('user');
            const [timerActive, setTimerActive] = useState(false);

            return (
                <div className="space-y-8 fade-in max-w-6xl mx-auto pb-10 px-4">
                    {/* Hàng 1: Dual Mode & System Call Flow */}
                    <div className="grid md:grid-cols-2 gap-8">
                        {/* 1. Dual Mode Card */}
                        <div className="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 flex flex-col">
                            <h2 className="text-2xl font-black text-slate-800 mb-6 flex items-center">
                                <div className="p-2 bg-indigo-50 rounded-xl mr-4 text-indigo-600">
                                    <Shield size={24} />
                                </div>
                                <span><Term>Dual Mode</Term> Operation</span>
                            </h2>
                            <p className="text-sm text-slate-500 mb-8 leading-relaxed">
                                Để ngăn lỗi lan rộng, phần cứng hỗ trợ ít nhất 2 chế độ riêng biệt, được phân biệt qua biến <strong>Mode Bit</strong>.
                            </p>

                            <div className="space-y-4 flex-1">
                                <div
                                    onClick={() => setMode('user')}
                                    className={`p-6 rounded-2xl border-2 transition-all duration-300 cursor-pointer ${mode === 'user' ? 'bg-indigo-50 border-indigo-600 shadow-md translate-x-1' : 'bg-slate-50 border-slate-100 opacity-60 hover:opacity-100'}`}
                                >
                                    <div className="flex justify-between items-center mb-2">
                                        <span className="font-black text-indigo-900 tracking-tight">User Mode (Bit = 1)</span>
                                        {mode === 'user' && <span className="flex h-2 w-2 rounded-full bg-indigo-600 animate-ping"></span>}
                                    </div>
                                    <p className="text-xs text-slate-500 font-medium italic">Thực thi mã ứng dụng. Các lệnh nhạy cảm (privileged) bị cấm hoàn toàn.</p>
                                </div>

                                <div
                                    onClick={() => setMode('kernel')}
                                    className={`p-6 rounded-2xl border-2 transition-all duration-300 cursor-pointer ${mode === 'kernel' ? 'bg-red-50 border-red-600 shadow-md translate-x-1' : 'bg-slate-50 border-slate-100 opacity-60 hover:opacity-100'}`}
                                >
                                    <div className="flex justify-between items-center mb-2">
                                        <span className="font-black text-red-900 tracking-tight">Kernel Mode (Bit = 0)</span>
                                        {mode === 'kernel' && <span className="flex h-2 w-2 rounded-full bg-red-600 animate-ping"></span>}
                                    </div>
                                    <p className="text-xs text-slate-500 font-medium italic">Dành cho Hệ Điều Hành. Toàn quyền truy cập phần cứng và các lệnh đặc quyền.</p>
                                </div>
                            </div>
                        </div>

                        {/* 2. System Call Flow Card */}
                        <div className="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 flex flex-col">
                            <h2 className="text-2xl font-black text-slate-800 mb-6 flex items-center">
                                <div className="p-2 bg-indigo-50 rounded-xl mr-4 text-indigo-600">
                                    <Layers size={24} />
                                </div>
                                <span>Luồng <Term>System Call</Term></span>
                            </h2>
                            <div className="flex-1 relative border-l-2 border-dashed border-slate-100 ml-5 pl-8 space-y-8 py-2">
                                {[
                                    { id: 1, title: "User Program", desc: "Gọi System Call (vd: read file).", color: "bg-indigo-600" },
                                    { id: 2, title: "Trap / Exception", desc: "Phần cứng đổi Mode Bit 1 -> 0.", color: "bg-slate-400" },
                                    { id: 3, title: "Kernel Execute", desc: "OS thực thi lệnh đặc quyền.", color: "bg-red-600" },
                                    { id: 4, title: "Return", desc: "Đổi Mode Bit 0 -> 1, trả kết quả.", color: "bg-emerald-500" }
                                ].map((s) => (
                                    <div key={s.id} className="relative group">
                                        <span className={`absolute -left-[45px] top-0 w-8 h-8 rounded-full ${s.color} text-white text-[11px] font-black flex items-center justify-center ring-4 ring-white shadow-lg transition-transform group-hover:scale-125`}>{s.id}</span>
                                        <div className="p-1">
                                            <span className="font-black text-slate-800 block text-sm mb-1">{s.title}</span>
                                            <span className="text-xs text-slate-500 font-medium">{s.desc}</span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Hàng 2: Timer Section (Bổ sung mới) */}
                    <div className="bg-white p-10 rounded-[2.5rem] shadow-sm border border-slate-100 relative overflow-hidden">
                        <div className="absolute top-0 right-0 p-8 opacity-5 text-indigo-600">
                            <Icon size={160}><circle cx="12" cy="12" r="10" /><polyline points="12 6 12 12 16 14" /></Icon>
                        </div>

                        <div className="grid md:grid-cols-2 gap-12 items-center">
                            <div>
                                <div className="inline-flex items-center gap-2 px-3 py-1 bg-amber-50 text-amber-600 rounded-full text-[10px] font-black uppercase tracking-widest mb-4">
                                    Resource Protection
                                </div>
                                <h2 className="text-3xl font-black text-slate-800 mb-6 leading-tight">
                                    Cơ chế <Term>Timer</Term>
                                </h2>
                                <p className="text-slate-600 leading-relaxed mb-6 font-medium">
                                    Timer được sử dụng để ngăn chương trình người dùng chiếm giữ CPU quá lâu (vòng lặp vô hạn).
                                    Đây là công cụ giúp OS thực hiện <strong>Đa nhiệm (Multitasking)</strong>.
                                </p>

                                <div className="space-y-4">
                                    <div className="flex gap-4 p-4 bg-slate-50 rounded-2xl border border-slate-100">
                                        <div className="shrink-0 w-10 h-10 bg-white rounded-xl shadow-sm flex items-center justify-center text-amber-500 font-black">1</div>
                                        <div>
                                            <h4 className="font-bold text-slate-800 text-sm">Thiết lập Counter</h4>
                                            {/* Sử dụng <Term> viết hoa và bỏ thẻ <span> dư thừa */}
                                            <p className="text-xs text-slate-500 mt-1">
                                                OS đặt một giá trị vào bộ đếm (đây là một
                                                <Term k="privileged instruction">Privileged Instruction</Term>).
                                            </p>
                                        </div>
                                    </div>

                                    <div className="flex gap-4 p-4 bg-slate-50 rounded-2xl border border-slate-100">
                                        <div className="shrink-0 w-10 h-10 bg-white rounded-xl shadow-sm flex items-center justify-center text-amber-500 font-black">2</div>
                                        <div>
                                            <h4 className="font-bold text-slate-800 text-sm">Tạo ngắt (Interrupt)</h4>
                                            <p className="text-xs text-slate-500 mt-1">
                                                Khi bộ đếm về 0, một ngắt phần cứng xảy ra, trả quyền điều khiển về cho OS.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Timer Animation Demo */}
                            <div className="flex flex-col items-center justify-center p-8 bg-slate-900 rounded-[2rem] shadow-2xl relative">
                                <div className="text-[10px] font-black text-indigo-400 uppercase tracking-[0.3em] mb-8">CPU Control Monitor</div>

                                {/* Circle Progress */}
                                <div className="relative w-48 h-48 flex items-center justify-center mb-8">
                                    <svg className="w-full h-full transform -rotate-90">
                                        <circle cx="96" cy="96" r="80" stroke="currentColor" strokeWidth="12" fill="transparent" className="text-slate-800" />
                                        <circle
                                            cx="96" cy="96" r="80" stroke="currentColor" strokeWidth="12" fill="transparent"
                                            className={`${timerActive ? 'text-indigo-500' : 'text-emerald-500'} transition-all duration-[3000ms] ease-linear`}
                                            strokeDasharray={502}
                                            strokeDashoffset={timerActive ? 502 : 0}
                                        />
                                    </svg>
                                    <div className="absolute flex flex-col items-center">
                                        <span className={`text-3xl font-black ${timerActive ? 'text-indigo-400' : 'text-emerald-400'}`}>
                                            {timerActive ? 'USER' : 'OS'}
                                        </span>
                                        <span className="text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1">Mode</span>
                                    </div>
                                </div>

                                <button
                                    onClick={() => {
                                        setTimerActive(true);
                                        setTimeout(() => setTimerActive(false), 3000);
                                    }}
                                    disabled={timerActive}
                                    className={`px-8 py-3 rounded-xl font-black text-xs tracking-widest transition-all ${timerActive ? 'bg-slate-800 text-slate-600' : 'bg-indigo-600 text-white hover:bg-white hover:text-indigo-600'}`}
                                >
                                    {timerActive ? 'TIMER COUNTING...' : 'START USER PROCESS'}
                                </button>

                                <div className="mt-6 text-center">
                                    <p className="text-[10px] text-slate-400 leading-relaxed font-medium italic">
                                        "Khi Timer hết hạn, CPU sẽ tự động gọi Interrupt chuyển từ User về Kernel."
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- NEW FEATURE: ENGLISH FLASHCARDS ---
        const EnglishStudy = () => {
            const [view, setView] = useState('flashcard'); // 'flashcard' | 'list'
            const [currentIndex, setCurrentIndex] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);
            const { speak } = useContext(TooltipContext);

            const terms = Object.keys(vocabData);
            const currentTerm = terms[currentIndex];
            const data = vocabData[currentTerm];

            // --- NAVIGATION LOGIC ---
            const handleNext = () => {
                setIsFlipped(false);
                setTimeout(() => setCurrentIndex((prev) => (prev + 1) % terms.length), 150);
            };

            const handlePrev = () => {
                setIsFlipped(false);
                setTimeout(() => setCurrentIndex((prev) => (prev - 1 + terms.length) % terms.length), 150);
            };

            const toggleFlip = () => setIsFlipped(!isFlipped);

            // --- KEYBOARD INTERACTION ---
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (view !== 'flashcard') return;
                    if (e.code === 'Space') { e.preventDefault(); toggleFlip(); }
                    if (e.code === 'ArrowRight') handleNext();
                    if (e.code === 'ArrowLeft') handlePrev();
                    if (e.code === 'KeyV') speak(currentTerm);
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [currentIndex, isFlipped, view]);

            return (
                <div className="max-w-6xl mx-auto pb-16 px-4 fade-in">
                    {/* Header Section */}
                    <div className="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
                        <div className="space-y-2">
                            <div className="inline-flex items-center gap-2 px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-bold uppercase tracking-widest">
                                <Zap size={14} /> Learning Lab
                            </div>
                            <h2 className="text-4xl font-extrabold text-slate-900 tracking-tight">Tiếng Anh chuyên ngành</h2>
                            <p className="text-slate-500 font-medium">Làm chủ tiếng Anh chuyên ngành, chủ đề Hệ điều hành với Flashcards thông minh.</p>
                        </div>

                        <div className="flex bg-slate-200/50 p-1.5 rounded-2xl backdrop-blur-md">
                            <button
                                onClick={() => setView('flashcard')}
                                className={`flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all duration-300 ${view === 'flashcard' ? 'bg-white text-indigo-600 shadow-xl' : 'text-slate-500 hover:text-slate-700'}`}
                            >
                                <BrainCircuit size={18} /> Flashcards
                            </button>
                            <button
                                onClick={() => setView('list')}
                                className={`flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all duration-300 ${view === 'list' ? 'bg-white text-indigo-600 shadow-xl' : 'text-slate-500 hover:text-slate-700'}`}
                            >
                                <Layers size={18} /> Glossary
                            </button>
                        </div>
                    </div>

                    {view === 'flashcard' ? (
                        <div className="flex flex-col items-center">
                            {/* Flashcard Area */}
                            <div className="perspective-2000 w-full max-w-[600px] h-[400px]">
                                <div
                                    onClick={toggleFlip}
                                    className={`relative w-full h-full cursor-pointer transition-transform duration-[700ms] transform-style-3d ${isFlipped ? 'rotate-y-180' : ''}`}
                                >
                                    {/* FRONT: English */}
                                    <div className="absolute inset-0 backface-hidden bg-white rounded-[2.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.05)] border border-slate-100 flex flex-col items-center justify-center p-12 overflow-hidden">
                                        <div className="absolute top-0 right-0 p-8 opacity-5">
                                            <Cpu size={120} />
                                        </div>
                                        <span className="mb-6 px-4 py-1.5 bg-indigo-50 text-indigo-500 rounded-full text-xs font-black uppercase tracking-[0.2em]">English Term</span>
                                        <h3 className="text-5xl font-black text-slate-800 text-center tracking-tighter mb-8">{currentTerm}</h3>
                                        <div className="flex items-center gap-4 group">
                                            <span className="text-xl font-mono text-slate-400">{data.ipa}</span>
                                            <button
                                                onClick={(e) => { e.stopPropagation(); speak(currentTerm); }}
                                                className="w-12 h-12 flex items-center justify-center bg-slate-50 text-slate-400 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-300 shadow-sm"
                                            >
                                                <Volume2 size={20} />
                                            </button>
                                        </div>
                                        <div className="absolute bottom-8 flex gap-3">
                                            <span className="kbd-hint bg-slate-100 border-none shadow-none text-[9px]">CLICK TO FLIP</span>
                                            <span className="kbd-hint bg-slate-100 border-none shadow-none text-[9px]">SPACE</span>
                                        </div>
                                    </div>

                                    {/* BACK: Vietnamese */}
                                    <div className="absolute inset-0 backface-hidden rotate-y-180 bg-indigo-600 rounded-[2.5rem] shadow-2xl flex flex-col items-center justify-center p-12 text-white text-center">
                                        <div className="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/graphy-dark.png')]"></div>
                                        <span className="mb-6 px-4 py-1.5 bg-white/10 text-white/80 rounded-full text-xs font-black uppercase tracking-[0.2em]">Vietnamese Meaning</span>
                                        <h3 className="text-4xl font-bold mb-6 tracking-tight">{data.vi}</h3>
                                        <div className="w-12 h-1 bg-white/20 rounded-full mb-6"></div>
                                        <p className="text-lg text-indigo-100 leading-relaxed font-medium max-w-[90%] italic">
                                            "{data.desc}"
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* Controls & Progress */}
                            <div className="mt-16 flex items-center gap-12">
                                <button
                                    onClick={handlePrev}
                                    className="w-16 h-16 rounded-2xl bg-white border border-slate-200 text-slate-400 hover:text-indigo-600 hover:border-indigo-600 hover:shadow-2xl transition-all duration-300 flex items-center justify-center group active:scale-90"
                                >
                                    <Icon size={32} className="group-hover:-translate-x-1 transition-transform"><path d="M15 18l-6-6 6-6" /></Icon>
                                </button>

                                <div className="flex flex-col items-center gap-3">
                                    <div className="text-3xl font-black text-slate-800 tracking-tighter">
                                        {String(currentIndex + 1).padStart(2, '0')}
                                        <span className="text-slate-300 mx-2 text-xl font-light">/</span>
                                        {terms.length}
                                    </div>
                                    <div className="w-48 h-1.5 bg-slate-100 rounded-full overflow-hidden">
                                        <div
                                            className="h-full bg-indigo-600 transition-all duration-700 ease-out"
                                            style={{ width: `${((currentIndex + 1) / terms.length) * 100}%` }}
                                        ></div>
                                    </div>
                                </div>

                                <button
                                    onClick={handleNext}
                                    className="w-16 h-16 rounded-2xl bg-indigo-600 text-white hover:bg-slate-900 hover:shadow-2xl transition-all duration-300 flex items-center justify-center group active:scale-90"
                                >
                                    <Icon size={32} className="group-hover:translate-x-1 transition-transform"><path d="M9 18l6-6-6-6" /></Icon>
                                </button>
                            </div>
                        </div>
                    ) : (
                        /* GRID VIEW: Glossy Cards */
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 slide-up">
                            {terms.map((key) => (
                                <div key={key} onClick={() => speak(key)} className="group bg-white p-8 rounded-[2rem] border border-slate-100 shadow-sm hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 relative overflow-hidden">
                                    <div className="absolute top-0 left-0 w-1.5 h-full bg-slate-100 group-hover:bg-indigo-600 transition-colors"></div>
                                    <div className="flex justify-between items-start mb-6">
                                        <div>
                                            <h4 className="text-2xl font-black text-slate-800 tracking-tight group-hover:text-indigo-600 transition-colors capitalize">{key}</h4>
                                            <p className="text-sm font-mono text-slate-400 mt-1">{vocabData[key].ipa}</p>
                                        </div>
                                        <button onClick={() => speak(key)} className="p-3 bg-slate-50 text-slate-400 rounded-xl hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                                            <Volume2 size={20} />
                                        </button>
                                    </div>
                                    <div className="space-y-3">
                                        <span className="inline-block px-3 py-1 bg-emerald-50 text-emerald-600 text-[11px] font-black uppercase rounded-lg">
                                            {vocabData[key].vi}
                                        </span>
                                        <p className="text-sm text-slate-500 leading-relaxed line-clamp-2">
                                            {vocabData[key].desc}
                                        </p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        };
        // Section: Quiz

        const Quiz = () => {
            const questions = [
                {
                    q: "Tại sao Hệ điều hành cần Dual Mode?",
                    options: ["Tăng tốc độ xử lý", "Bảo vệ hệ thống khỏi lỗi và người dùng", "Tiết kiệm điện năng", "Hỗ trợ đồ họa"],
                    a: 1,
                    expl: "Dual Mode ngăn chặn user program thực thi các lệnh đặc quyền có thể gây hại cho hệ thống."
                },
                {
                    q: "Chương trình nào là 'trung gian' giữa User và Hardware?",
                    options: ["Compiler", "Operating System", "MS Word", "Antivirus"],
                    a: 1,
                    expl: "Đó chính là định nghĩa cơ bản của Hệ điều hành."
                },
                {
                    q: "Hiện tượng gì xảy ra khi chương trình lỗi (ví dụ chia cho 0)?",
                    options: ["Tắt máy", "Trap / Exception", "Bỏ qua lỗi", "Xóa RAM"],
                    a: 1,
                    expl: "Lỗi phần mềm sẽ tạo ra Trap (Software Interrupt) để OS xử lý."
                },
                {
                    q: "Bộ nhớ nào là Non-volatile (bất biến)?",
                    options: ["Registers", "Cache", "RAM", "Hard Disk (HDD)"],
                    a: 3,
                    expl: "HDD/SSD giữ dữ liệu khi mất điện. Các loại còn lại (Register, Cache, RAM) đều mất dữ liệu (Volatile)."
                },

                {
                    q: "Nếu một Operating System được thiết kế với mục tiêu chính là 'Efficiency' thay vì 'Convenience', đối tượng sử dụng chính thường là ai?",
                    options: ["Người dùng phổ thông (Desktop)", "Hệ thống Mainframe/Server", "Người dùng thiết bị di động", "Học sinh tiểu học"],
                    a: 1,
                    expl: "Ở góc độ System View, OS đóng vai trò là Resource Allocator để tối ưu hiệu suất tài nguyên (Efficiency), phù hợp cho các hệ thống tính toán lớn."
                },
                {
                    q: "Tại sao nói Hệ điều hành hiện đại hoạt động theo cơ chế 'Interrupt-driven'?",
                    options: [
                        "Vì CPU luôn phải chờ thiết bị I/O hoàn thành",
                        "Vì OS chỉ thực thi khi có tín hiệu ngắt từ phần cứng hoặc phần mềm",
                        "Vì người dùng thường xuyên làm gián đoạn hệ thống",
                        "Vì các tiến trình luôn tranh giành CPU"
                    ],
                    a: 1,
                    expl: "Hệ Điều Hành sẽ ở trạng thái chờ cho đến khi có một sự kiện (ngắt) xảy ra. CPU không lãng phí thời gian 'thăm dò' (polling) thiết bị."
                },
                {
                    q: "Trong Storage Hierarchy, sự khác biệt cốt lõi giữa 'Electronic Disk' (SSD) và 'Main Memory' (RAM) là gì?",
                    options: [
                        "SSD nhanh hơn RAM",
                        "RAM là Non-volatile còn SSD là Volatile",
                        "RAM là Volatile còn SSD là Non-volatile",
                        "Cả hai đều mất dữ liệu khi ngắt điện"
                    ],
                    a: 2,
                    expl: "RAM là bộ nhớ khả biến (Volatile), mất dữ liệu khi mất điện. SSD là bộ nhớ bất biến (Non-volatile), lưu trữ lâu dài."
                },
                {
                    q: "Điều gì sẽ xảy ra nếu một chương trình người dùng cố gắng thực thi lệnh 'Switch to Kernel Mode' một cách thủ công?",
                    options: [
                        "Hệ thống lập tức chuyển sang Kernel Mode",
                        "CPU bỏ qua lệnh đó và tiếp tục chạy",
                        "Phần cứng coi đó là lệnh đặc quyền trái phép và tạo ra một Trap (Exception)",
                        "Máy tính tự khởi động lại để bảo mật"
                    ],
                    a: 2,
                    expl: "Đây là lệnh đặc quyền (Privileged Instruction). Khi thực thi ở User Mode (Bit=1), phần cứng sẽ chặn lại và báo cho OS xử lý lỗi."
                },
                {
                    q: "Trong hệ thống Multiprocessor, đặc điểm 'Graceful Degradation' có ý nghĩa gì?",
                    options: [
                        "Hệ thống tự động tăng tốc khi có nhiều CPU",
                        "Nếu một bộ xử lý bị hỏng, hệ thống vẫn tiếp tục chạy nhưng hiệu năng giảm đi",
                        "Hệ thống sẽ tắt hoàn toàn để bảo vệ các linh kiện còn lại",
                        "Tất cả các CPU chia sẻ chung một bộ nhớ Cache duy nhất"
                    ],
                    a: 1,
                    expl: "Đây là tính năng tăng độ tin cậy. Hệ thống không bị sập hoàn toàn (Fail-soft) mà chỉ giảm thông lượng (Throughput) tương ứng."
                },
                {
                    q: "Cơ chế 'Timer' trong OS đóng vai trò quan trọng nhất trong việc gì?",
                    options: [
                        "Đếm giờ để hiển thị trên màn hình",
                        "Tăng tốc độ xử lý của CPU",
                        "Ngăn chặn một chương trình người dùng chiếm giữ CPU vĩnh viễn",
                        "Đo lường dung lượng RAM đang sử dụng"
                    ],
                    a: 2,
                    expl: "Timer tạo ra các ngắt định kỳ để trả lại quyền điều khiển cho OS, đảm bảo không có tiến trình nào 'độc chiếm' hệ thống."
                }
            ];
            const [ans, setAns] = useState({});
            const [sub, setSub] = useState(false);
            const score = Object.keys(ans).reduce((acc, k) => acc + (ans[k] === questions[k].a ? 1 : 0), 0);
            return (
                <div className="max-w-4xl mx-auto pb-20 fade-in">
                    <div className="bg-white p-10 rounded-[2.5rem] shadow-sm border border-slate-100 mb-8 flex flex-col md:flex-row justify-between items-center gap-6">
                        <div className="flex items-center gap-4">
                            <div className="w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-200"><CheckSquare size={30} /></div>
                            <div><h2 className="text-2xl font-black text-slate-800 tracking-tight">Kiểm tra Chương 1</h2><p className="text-slate-400 text-sm font-medium">Hệ điều hành</p></div>
                        </div>
                        {sub && <div className="px-6 py-3 bg-indigo-50 rounded-2xl border border-indigo-100 font-black text-2xl text-indigo-600">{score}/{questions.length}</div>}
                    </div>
                    <div className="space-y-6">
                        {questions.map((q, i) => (
                            <div key={i} className="bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm transition-all hover:shadow-md">
                                <p className="font-bold text-slate-800 mb-6 flex gap-3 leading-snug"><span className="text-indigo-600 font-black">Q{i + 1}.</span> {q.q}</p>
                                <div className="grid gap-3 pl-8">
                                    {q.options.map((o, oi) => {
                                        let style = "text-left p-4 rounded-2xl border-2 font-bold text-sm transition-all ";
                                        if (sub) {
                                            if (oi === q.a) style += "bg-emerald-50 border-emerald-500 text-emerald-700";
                                            else if (ans[i] === oi) style += "bg-red-50 border-red-500 text-red-700 opacity-60";
                                            else style += "border-slate-50 text-slate-300";
                                        } else style += ans[i] === oi ? "bg-indigo-50 border-indigo-600 text-indigo-700 shadow-md" : "border-slate-50 text-slate-500 hover:border-indigo-200";
                                        return <button key={oi} onClick={() => !sub && setAns({ ...ans, [i]: oi })} className={style}>{o}</button>;
                                    })}
                                </div>
                                {sub && <div className="mt-6 ml-8 p-4 bg-indigo-50/50 rounded-xl text-xs text-indigo-800 italic border border-indigo-100"><b>Phân tích:</b> {q.expl}</div>}
                            </div>
                        ))}
                    </div>
                    {!sub ? <button onClick={() => { window.scrollTo({ top: 0, behavior: 'smooth' }); setSub(true) }} disabled={Object.keys(ans).length < 10} className="w-full mt-10 p-5 bg-indigo-600 text-white rounded-[2rem] font-black shadow-2xl disabled:opacity-30 transform hover:-translate-y-1 transition-all">NỘP BÀI KIỂM TRA</button> : <button onClick={() => { setSub(false); setAns({}); }} className="w-full mt-10 p-5 bg-slate-800 text-white rounded-[2rem] font-black shadow-2xl">THỬ THÁCH LẠI</button>}
                </div>
            );
        };

        // --- MAIN APP ---
        const App = () => {
            const [activeTab, setActiveTab] = useState('overview');

            const renderContent = () => {
                switch (activeTab) {
                    case 'overview': return <Overview />;
                    case 'internals': return <Internals />;
                    case 'storage': return <Storage />;
                    case 'architecture': return <Architecture />;
                    case 'operations': return <Operations />;
                    case 'english': return <EnglishStudy />;
                    case 'quiz': return <Quiz />;
                    default: return <Overview />;
                }
            };

            return (

                <TooltipProvider>
                    {/* Thay bg-slate-100 bằng màu xám cực nhạt fafafa hoặc f8fafc để Sidebar trắng nổi lên */}
                    <div className="flex flex-col md:flex-row min-h-screen bg-[#fbfcfd] font-inter">
                        <Sidebar activeTab={activeTab} setActiveTab={setActiveTab} />
                        <main className="flex-1 p-4 md:p-12 overflow-y-auto h-screen relative scroll-smooth">
                            {renderContent()}
                        </main>
                    </div>
                </TooltipProvider>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>
