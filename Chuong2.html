<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGOJ LAB - Chương 2: Cấu trúc Hệ điều hành</title>
    <link rel="icon" href="AGOJ - logo.png" type="icon/png">

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@400;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #fbfcfd;
            color: #1e293b;
        }

        h1, h2, h3, h4 { font-family: 'Plus Jakarta Sans', sans-serif; }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        .slide-up { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }

        .perspective-2000 { perspective: 2000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }

        .term-highlight {
            cursor: pointer;
            border-bottom: 2px solid #e2e8f0;
            color: #4f46e5;
            font-weight: 700;
            transition: all 0.2s ease;
            display: inline;
        }

        .term-highlight:hover {
            background-color: #f5f3ff;
            border-bottom-color: #6366f1;
        }

        .tooltip-glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(226, 232, 240, 0.8);
            animation: tooltipBounce 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes tooltipBounce {
            0% { opacity: 0; transform: translateX(-50%) translateY(10px) scale(0.9); }
            100% { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
        }

        .custom-scrollbar-light::-webkit-scrollbar { width: 5px; }
        .custom-scrollbar-light::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        .kbd-hint { padding: 2px 6px; font-family: monospace; background: #f1f5f9; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 10px; color: #64748b; }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useContext, createContext } = React;

        // --- 1. DỮ LIỆU TỪ TEXT.HTML ---
        const vocabData = {
            "process": { ipa: "/ˈprəʊ.ses/", type: "noun", vi: "Tiến trình", desc: "Một chương trình đang thực thi. Khác với chương trình (tĩnh), tiến trình là thực thể động cần tài nguyên CPU, RAM để chạy." },
            "main memory": { ipa: "/meɪn ˈmem.ər.i/", type: "noun", vi: "Bộ nhớ chính", desc: "Nơi lưu trữ trung tâm cho các thao tác. OS quản lý việc cấp phát/thu hồi vùng nhớ để CPU hoạt động hiệu quả." },
            "file": { ipa: "/faɪl/", type: "noun", vi: "Tập tin", desc: "Tập hợp thông tin liên quan được lưu trữ trên bộ nhớ ngoài, được ánh xạ vào thiết bị vật lý bởi OS." },
            "buffering": { ipa: "/ˈbʌf.ər.ɪŋ/", type: "noun", vi: "Vùng đệm", desc: "Cơ chế dùng vùng nhớ tạm trong RAM để chồng lấp thao tác I/O với việc thực thi của chính công việc đó." },
            "caching": { ipa: "/ˈkæʃ.ɪŋ/", type: "noun", vi: "Lưu đệm", desc: "Lưu dữ liệu tạm thời vào bộ nhớ tốc độ cao để tăng tốc độ truy cập." },
            "spooling": { ipa: "/ˈspuː.lɪŋ/", type: "noun", vi: "Cuộn dữ liệu", desc: "Chồng lấp I/O của một công việc với việc thực thi của một công việc khác (vd: in ấn)." },
            "system call": { ipa: "/ˈsɪs.təm kɔːl/", type: "noun", vi: "Lời gọi hệ thống", desc: "Giao diện cung cấp dịch vụ của OS cho ứng dụng thông qua các API như Win32, POSIX." },
            "monolithic": { ipa: "/ˌmɒn.əˈlɪθ.ɪk/", type: "adj", vi: "Đơn khối", desc: "Cấu trúc đặt toàn bộ các chức năng quản lý vào chung một khối nhân (Kernel) duy nhất." },
            "microkernel": { ipa: "/ˈmaɪ.krəʊˌkɜː.nəl/", type: "noun", vi: "Vi nhân", desc: "Nhân tối giản, chuyển các dịch vụ không thiết yếu sang không gian người dùng (User Space)." },
            "shell": { ipa: "/ʃel/", type: "noun", vi: "Vỏ hệ thống", desc: "Trình thông dịch lệnh chờ nhận lệnh từ người dùng và gọi OS thực hiện." },
            "accounting": { ipa: "/əˈkaʊn.tɪŋ/", type: "noun", vi: "Kế toán", desc: "Dịch vụ OS lưu vết người dùng để thống kê hiệu năng hoặc tính phí sử dụng." },
            "protection": { ipa: "/prəˈtek.ʃən/", type: "noun", vi: "Bảo vệ", desc: "Cơ chế kiểm soát truy cập tài nguyên, phân định quyền Authorized/Unauthorized." }
        };

        // --- 2. ICONS ---
        const Icon = ({ children, size = 20, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const BookOpen = (p) => <Icon {...p}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" /><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" /></Icon>;
        const Layers = (p) => <Icon {...p}><polygon points="12 2 2 7 12 12 22 7 12 2" /><polyline points="2 17 12 22 22 17" /><polyline points="2 12 12 17 22 12" /></Icon>;
        const Zap = (p) => <Icon {...p}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" /></Icon>;
        const Cpu = (p) => <Icon {...p}><rect x="4" y="4" width="16" height="16" rx="2" ry="2" /><rect x="9" y="9" width="6" height="6" /><path d="M9 1v3M15 1v3M9 20v3M15 20v3" /></Icon>;
        const Shield = (p) => <Icon {...p}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" /></Icon>;
        const Volume2 = (p) => <Icon {...p}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" /><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07" /></Icon>;
        const HardDrive = (p) => <Icon {...p}><line x1="22" y1="12" x2="2" y2="12" /><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z" /><line x1="6" y1="16" x2="6.01" y2="16" /><line x1="10" y1="16" x2="10.01" y2="16" /></Icon>;
        const Activity = (p) => <Icon {...p}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12" /></Icon>;
        const CheckSquare = (p) => <Icon {...p}><polyline points="9 11 12 14 22 4" /><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" /></Icon>;
        const BrainCircuit = (p) => <Icon {...p}><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z" /><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z" /><path d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4" /><path d="M17.599 6.5a3 3 0 0 0 .399-1.375" /><path d="M6.003 5.125A3 3 0 0 0 6.401 6.5" /><path d="M3.477 10.896a4 4 0 0 1 .585-.396" /><path d="M19.938 10.5a4 4 0 0 1 .585.396" /><path d="M6 18a4 4 0 0 1-1.97-3.284" /><path d="M17.97 14.716A4 4 0 0 1 18 18" /></Icon>;
        const RefreshCcw = (p) => <Icon {...p}><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" /><path d="M3 3v5h5" /><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16" /><path d="M16 16h5v5" /></Icon>;
        // --- 3. TOOLTIP SYSTEM ---
        const TooltipContext = createContext();
        const TooltipProvider = ({ children }) => {
            const [tooltip, setTooltip] = useState(null);
            const showTooltip = (termKey, rect) => {
                const data = vocabData[termKey.toLowerCase()];
                if (data) setTooltip({ term: termKey, data, x: rect.left + (rect.width / 2), y: rect.bottom });
            };
            const hideTooltip = () => setTooltip(null);
            const speak = (text) => { window.speechSynthesis.cancel(); const u = new SpeechSynthesisUtterance(text); u.lang = 'en-US'; window.speechSynthesis.speak(u); };
            return (
                <TooltipContext.Provider value={{ showTooltip, hideTooltip, speak }}>
                    {children}
                    {tooltip && ReactDOM.createPortal(
                        <div className="fixed z-[9999] pointer-events-none" style={{ left: `${tooltip.x}px`, top: `${tooltip.y + 14}px`, transform: 'translateX(-50%)' }}>
                            <div className="tooltip-glass p-5 rounded-2xl shadow-xl w-80 relative">
                                <div className="tooltip-arrow-custom"></div>
                                <div className="relative z-10">
                                    <h3 className="text-xl font-black text-indigo-600 capitalize mb-2 leading-none">{tooltip.term}</h3>
                                    <div className="flex items-center gap-2 mb-3 text-[10px] font-mono text-slate-400">
                                        {tooltip.data.ipa} <button className="text-indigo-400 pointer-events-auto" onClick={() => speak(tooltip.term)}><Volume2 size={12} /></button>
                                    </div>
                                    <div className="bg-slate-50 p-3 rounded-xl mb-3 font-bold text-slate-800 text-sm border border-slate-100">{tooltip.data.vi}</div>
                                    <p className="text-xs text-slate-500 italic leading-relaxed">{tooltip.data.desc}</p>
                                </div>
                            </div>
                        </div>, document.body
                    )}
                </TooltipContext.Provider>
            );
        };

        const Term = ({ children, k }) => {
            const { showTooltip, hideTooltip, speak } = useContext(TooltipContext);
            const key = k || children;
            return <span className="term-highlight" onMouseEnter={(e) => showTooltip(key, e.target.getBoundingClientRect())} onMouseLeave={hideTooltip} onClick={() => speak(key)}>{children}</span>;
        };

        // --- 4. SIDEBAR ---
        const Sidebar = ({ activeTab, setActiveTab }) => {
            const menuItems = [
                { id: 'components', label: '1. Thành phần Hệ điều hành', icon: <Layers /> },
                { id: 'services', label: '2. Dịch vụ Hệ điều hành', icon: <BookOpen /> },
                { id: 'syscall', label: '3. Lời gọi Hệ thống', icon: <Zap /> },
                { id: 'programs', label: '4. Chương trình Hệ thống', icon: <Cpu /> },
                { id: 'architecture', label: '5. Cấu trúc Hệ thống', icon: <Icon><rect x="3" y="3" width="18" height="18" rx="2" ry="2" /><line x1="3" y1="9" x2="21" y2="9" /><line x1="9" y1="21" x2="9" y2="9" /></Icon> },
                { id: 'english', label: '6. Tiếng Anh chuyên ngành', icon: <Icon><circle cx="12" cy="12" r="10" /><path d="M12 16v-4" /><path d="M12 8h.01" /></Icon> },
                { id: 'quiz', label: '7. Kiểm tra kiến thức', icon: <Shield /> },
            ];

            return (
                <div className="w-full md:w-80 bg-white border-r border-slate-200 flex flex-col h-auto md:h-screen sticky top-0 z-50 shadow-[4px_0_24px_rgba(0,0,0,0.02)]">
                    {/* Logo Section */}
                    <div className="p-8 border-b border-slate-50 flex flex-col gap-1">
                        <div className="flex items-center gap-4">
                            {/* Logo Container - Không background, chỉ hiệu ứng Zoom */}
                            <div className="w-12 h-12 flex items-center justify-center">
                                <img
                                    src="./HNUE.png"
                                    alt="HNUE Logo"
                                    className="w-full h-full object-contain transition-transform duration-300 hover:scale-125 cursor-pointer"
                                />
                            </div>

                            <div className="flex flex-col">
                                <h1 className="text-2xl font-black text-slate-800 tracking-tighter leading-tight">
                                    AGOJ - LAB
                                </h1>
                                <span className="text-[9px] font-bold text-slate-400 uppercase tracking-[0.2em]">Môn: Nguyên lý hệ điều hành</span>
                            </div>
                        </div>

                        {/* Status Tag */}
                        <div className="flex items-center gap-2 mt-5 px-3 py-1.5 bg-emerald-50 w-fit rounded-xl border border-emerald-100">
                            <div className="relative flex h-2 w-2">
                                <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                                <span className="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
                            </div>
                            <span className="text-[10px] font-black text-emerald-700 uppercase tracking-widest">
                                Chương 2: Cấu trúc Hệ điều hành
                            </span>
                        </div>
                    </div>

                    {/* Navigation Section */}
                    <nav className="flex-1 overflow-y-auto py-6 px-4 space-y-2 custom-scrollbar-light">
                        {menuItems.map((item) => {
                            const isActive = activeTab === item.id;
                            return (
                                <button
                                    key={item.id}
                                    onClick={() => setActiveTab(item.id)}
                                    className={`w-full flex items-center px-4 py-4 rounded-2xl transition-all duration-300 group relative
                                ${isActive
                                            ? 'bg-indigo-600 text-white shadow-xl shadow-indigo-100 translate-x-1'
                                            : 'text-slate-500 hover:bg-slate-50 hover:text-indigo-600 hover:translate-x-1'
                                        }`}
                                >
                                    {/* Active Indicator Line */}
                                    {isActive && (
                                        <div className="absolute left-0 w-1 h-6 bg-white rounded-full opacity-50"></div>
                                    )}

                                    <span className={`mr-4 transition-colors duration-300 ${isActive ? 'text-white' : 'text-slate-400 group-hover:text-indigo-600'}`}>
                                        {React.cloneElement(item.icon, { size: 22, strokeWidth: isActive ? 2.5 : 2 })}
                                    </span>

                                    <span className={`text-sm font-bold tracking-tight ${isActive ? 'text-white' : 'text-slate-600 group-hover:text-indigo-600'}`}>
                                        {item.label}
                                    </span>

                                    {!isActive && (
                                        <div className="ml-auto opacity-0 group-hover:opacity-100 transition-opacity">
                                            <Icon size={16}><path d="M9 18l6-6-6-6" /></Icon>
                                        </div>
                                    )}
                                </button>
                            );
                        })}
                    </nav>

                    {/* User Info / Footer Sidebar */}
                    <div className="p-6 bg-slate-50/50 border-t border-slate-100">
                        <div className="flex items-center gap-3 p-3 bg-white rounded-2xl border border-slate-100 shadow-sm">
                            {/* Container Logo */}
                            <div className="w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold shadow-inner overflow-hidden">
                                {/* Sửa lỗi: Thêm dấu /> ở cuối thẻ img */}
                                <img
                                    src="./AGOJ - logo.png"
                                    alt="Logo"
                                    className="w-full h-full object-cover"
                                />
                            </div>

                            {/* Thông tin lớp học */}
                            <div className="flex flex-col">
                                <span className="text-xs font-black text-slate-800 tracking-wide uppercase">
                                    Lớp A1K75
                                </span>
                                <span className="text-[10px] font-bold text-slate-400 uppercase tracking-tighter">
                                    Sư phạm Tin học
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- 5. COMPONENT NỘI DUNG (CẬP NHẬT TỪ TEXT.HTML) ---

        const ComponentsSection = () => (
            <div className="space-y-8 fade-in max-w-5xl mx-auto pb-10">
                <div className="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100">
                    <h2 className="text-2xl font-bold text-slate-800 mb-4 flex items-center gap-4">
                        <Layers className="text-indigo-600" size={32} /> 1. Các thành phần của Hệ điều hành
                    </h2>
                    <p className="text-slate-600 leading-relaxed text-lg mb-8">Hệ điều hành hiện đại được cấu thành từ 7 thành phần quản lý chính. Sự phối hợp giữa chúng giúp hệ thống vận hành trơn tru.</p>
                    <div className="grid md:grid-cols-2 gap-8 mb-12">
                        <div className="p-8 bg-indigo-50/50 rounded-3xl border-2 border-indigo-100">
                            <h3 className="text-xl font-black text-indigo-900 mb-4 tracking-tight">1.1 Quản lý <Term k="process">Tiến trình</Term></h3>
                            <p className="text-sm text-indigo-700 leading-relaxed mb-4 font-medium italic">"Tiến trình là một chương trình đang thực thi. Khác với chương trình (tĩnh), tiến trình là thực thể động."</p>
                            <div className="space-y-3">
                                <p className="text-xs font-black text-indigo-400 uppercase tracking-widest">Nhiệm vụ của OS:</p>
                                <ul className="grid grid-cols-1 gap-2 text-xs text-indigo-950 font-bold">
                                    <li>• Tạo và hủy tiến trình (User & System).</li>
                                    <li>• Tạm dừng và thực thi tiếp.</li>
                                    <li>• Đồng bộ và giao tiếp tiến trình.</li>
                                    <li>• Xử lý tắc nghẽn (Deadlock).</li>
                                </ul>
                            </div>
                        </div>
                        <div className="p-8 bg-emerald-50/50 rounded-3xl border-2 border-emerald-100">
                            <h3 className="text-xl font-black text-emerald-900 mb-4 tracking-tight">1.2 Quản lý <Term k="main memory">Bộ nhớ chính</Term></h3>
                            <p className="text-sm text-emerald-700 leading-relaxed mb-6 font-medium">Bộ nhớ chính là trung tâm của các thao tác. Để CPU hiệu quả, OS phải quản lý việc nạp, cấp phát và thu hồi vùng nhớ.</p>
                            <div className="bg-white p-4 rounded-2xl border border-emerald-200">
                                <h4 className="text-[10px] font-black text-emerald-400 uppercase mb-3 text-center">Storage Hierarchy</h4>
                                <div className="flex flex-wrap justify-center gap-2 text-[10px] font-mono text-emerald-800 italic">
                                    <span>Registers</span> → <span>Cache</span> → <span>RAM</span> → <span>SSD/HDD</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div className="grid md:grid-cols-3 gap-6">
                        <div className="p-6 bg-slate-50 rounded-3xl border border-slate-100 transition-all hover:bg-white hover:shadow-xl">
                            <h4 className="font-black text-slate-800 text-sm mb-3">1.3 Quản lý <Term k="file">File</Term></h4>
                            <p className="text-[11px] text-slate-500">Tạo/xóa file & thư mục, các thao tác copy/rename, ánh xạ file vào thiết bị lưu trữ và sao lưu dữ liệu.</p>
                        </div>
                        <div className="p-6 bg-slate-50 rounded-3xl border border-slate-100 transition-all hover:bg-white hover:shadow-xl">
                            <h4 className="font-black text-slate-800 text-sm mb-3">1.4 Quản lý Hệ thống I/O</h4>
                            <p className="text-[11px] text-slate-500">Che dấu phần cứng qua các cơ chế: <Term k="buffering">Buffering</Term>, <Term k="caching">Caching</Term>, <Term k="spooling">Spooling</Term>.</p>
                        </div>
                        <div className="p-6 bg-slate-50 rounded-3xl border border-slate-100 transition-all hover:bg-white hover:shadow-xl">
                            <h4 className="font-black text-slate-800 text-sm mb-3">1.5 Lưu trữ thứ cấp</h4>
                            <p className="text-[11px] text-slate-500">Quản lý không gian trống, cấp phát lưu trữ lâu dài trên HDD/SSD khi RAM không đủ hoặc mất điện.</p>
                        </div>
                    </div>
                </div>
            </div>
        );

        const ServicesSection = () => (
            <div className="space-y-8 fade-in max-w-5xl mx-auto pb-10">
                <div className="bg-indigo-600 p-10 rounded-[3rem] shadow-xl text-white overflow-hidden relative">
                    <h2 className="text-2xl font-bold text-white mb-4 flex items-center gap-4">
                        <BookOpen size={32} /> 2. Các dịch vụ Hệ điều hành cung cấp
                    </h2>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        {[
                            { t: "Giao diện (UI)", d: "CLI (Dòng lệnh), GUI (Đồ họa), Touch-screen." },
                            { t: "Thực thi chương trình", d: "Nạp, chạy và kết thúc chương trình (Normal/Error)." },
                            { t: "Thao tác I/O", d: "OS thực hiện truy cập phần cứng thay cho người dùng." },
                            { t: "Hệ thống File", d: "Đọc, ghi, tạo, xóa và quản lý quyền truy cập tập tin." },
                            { t: "Giao tiếp", d: "Trao đổi qua Shared Memory hoặc Message Passing." },
                            { t: "Phát hiện lỗi", d: "Kiểm tra CPU, RAM, I/O hoặc lỗi logic (chia cho 0)." },
                            { t: "Cấp phát tài nguyên", d: "Phân phối cho nhiều user/job chạy cùng lúc." },
                            { t: "Kế toán (Accounting)", d: "Lưu vết để thống kê hoặc tính phí sử dụng tài nguyên." },
                            { t: "Bảo vệ & An ninh", d: "Kiểm soát truy xuất tài nguyên hệ thống an toàn." }
                        ].map((s, i) => (
                            <div key={i} className="p-5 bg-white/10 rounded-2xl border border-white/20 hover:bg-white/20 transition-all backdrop-blur-md">
                                <h4 className="font-bold mb-1">{s.t}</h4>
                                <p className="text-[11px] opacity-80">{s.d}</p>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );

        const SysCallSection = () => (
            <div className="space-y-8 fade-in max-w-5xl mx-auto pb-10">
                <div className="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-200">
                    <h2 className="text-2xl font-bold text-slate-800 mb-4 flex items-center gap-4">
                        <Zap className="text-indigo-600" size={32} /> 3. Lời gọi hệ thống (<Term k="system call">System Call</Term>)
                    </h2>
                    <p className="text-slate-600 leading-relaxed font-medium mb-10 italic">Cung cấp giao diện giữa tiến trình và hệ điều hành bằng cách gọi đến các dịch vụ mà hệ điều hành cung cấp.</p>
                    <div className="grid md:grid-cols-2 gap-10">
                        <div className="bg-slate-50 p-8 rounded-3xl border border-slate-100">
                            <h3 className="font-black text-indigo-600 uppercase text-xs tracking-widest mb-6 underline underline-offset-8">Truyền tham số</h3>
                            <div className="space-y-4">
                                <div className="p-4 bg-white rounded-2xl shadow-sm font-bold text-sm">1. Qua Thanh ghi (Register)</div>
                                <div className="p-4 bg-white rounded-2xl shadow-sm font-bold text-sm">2. Qua Vùng nhớ (Memory/Block)</div>
                                <div className="p-4 bg-white rounded-2xl shadow-sm font-bold text-sm">3. Qua Stack (Ngăn xếp)</div>
                            </div>
                        </div>
                        <div className="p-8 bg-slate-900 rounded-[2.5rem] text-white">
                            <h3 className="text-indigo-400 font-black mb-6 uppercase text-xs tracking-widest">Ví dụ API</h3>
                            <ul className="space-y-3 font-bold text-sm">
                                <li>• Win32 API (Windows)</li>
                                <li>• POSIX API (Unix, Linux, macOS)</li>
                                <li>• Java API (JVM)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        );

        const StructureSection = () => {
            const [activeTab, setActiveTab] = useState('Monolithic');
            const structures = {
                'Monolithic': {
                    title: "Cấu trúc Monolithic (Đơn khối)", subtitle: "Original UNIX Architecture",
                    description: "Toàn bộ chức năng cốt lõi của hệ điều hành nằm chung trong một không gian địa chỉ nhân (Kernel Space) duy nhất để tối ưu hiệu năng.",
                    details: [
                        { label: "Đặc điểm", content: "Hệ thống chia làm hai phần tách biệt: Nhân (Kernel) và Chương trình hệ thống. Các thành phần tương tác rất nhanh qua gọi hàm trực tiếp." },
                        { label: "Ưu điểm", content: "Hiệu năng cực cao do không tốn chi phí chuyển đổi ngữ cảnh (context switch) giữa các tầng." },
                        { label: "Nhược điểm", content: "Khó bảo trì và mở rộng. Một lỗi nhỏ ở bất kỳ vị trí nào trong nhân cũng có thể làm sập toàn bộ hệ điều hành." }
                    ],
                    img: "./Chuong2/Monolithic.jpg", example: "Hệ điều hành UNIX nguyên bản.",
                    imgDesc: "Sơ đồ: Users -> Shells/Commands -> System-call Interface -> Monolithic Kernel -> Hardware."
                },
                'Layered': {
                    title: "Cấu trúc Layered Approach (Phân lớp)", subtitle: "Hệ thống phân cấp mô-đun",
                    description: "Hệ điều hành được chia thành nhiều lớp (Layer) xếp chồng lên nhau. Mỗi lớp được xây dựng dựa trên dịch vụ của lớp ngay dưới nó.",
                    details: [
                        { label: "Nguyên tắc", content: "Lớp N chỉ có thể gọi hàm của lớp N-1. Lớp 0 luôn là phần cứng (Hardware), lớp N là giao diện người dùng (UI)." },
                        { label: "Ưu điểm", content: "Cực kỳ dễ gỡ lỗi (debug) và thay đổi module vì mỗi tầng hoàn toàn độc lập về mặt cài đặt." },
                        { label: "Nhược điểm", content: "Hiệu năng giảm đáng kể khi phải đi qua quá nhiều lớp trung gian." }
                    ],
                    img: "./Chuong2/Layered.png", example: "Hệ điều hành THE OS.",
                    imgDesc: "Sơ đồ các vòng tròn đồng tâm: Phần cứng ở tâm, bao bọc bởi các lớp quản lý cho đến tầng giao diện."
                },
                'Microkernels': {
                    title: "Cấu trúc Microkernels (Vi nhân)", subtitle: "Tối giản nhân để bảo mật",
                    description: "Kiến trúc này thu gọn nhân tối giản, chỉ giữ lại các dịch vụ thiết yếu và đẩy các dịch vụ khác sang không gian người dùng.",
                    details: [
                        { label: "Cơ chế IPC", content: "Các module người dùng giao tiếp với nhau bằng cơ chế truyền thông điệp (Message Passing) thông qua nhân." },
                        { label: "Ưu điểm", content: "An toàn và dễ mở rộng. Nếu một dịch vụ ở User mode bị lỗi, nó không làm ảnh hưởng đến sự ổn định của nhân OS." },
                        { label: "Hạn chế", content: "Hiệu năng giảm do chi phí trao đổi thông điệp (overhead) lớn." }
                    ],
                    img: "./Chuong2/Microkernels.jpg", example: "CMU Mach OS (nền tảng nhân macOS).",
                    imgDesc: "Sơ đồ Microkernel: Các dịch vụ nằm ở User Mode, giao tiếp qua Message Passing xuyên qua nhân nhỏ ở giữa."
                },
                'Modules': {
                    title: "Cấu trúc Modules (LKM)", subtitle: "Loadable Kernel Modules",
                    description: "Sử dụng thiết kế hướng đối tượng để nạp và gỡ các thành phần của nhân một cách linh hoạt.",
                    details: [
                        { label: "Linh hoạt", content: "Mỗi module tách biệt và trao đổi qua Interface chuẩn. Nạp động khi cần giúp tiết kiệm tài nguyên." },
                        { label: "Phổ biến", content: "Là cách tiếp cận của hầu hết các nhân hệ điều hành hiện đại như Linux, Solaris." }
                    ],
                    img: "./Chuong2/Modules.jpg", example: "Nhân Linux, Solaris.",
                    imgDesc: "Sơ đồ nhân Linux: Core kernel trung tâm kết nối với các Loadable Modules nạp động."
                },
                'Hybrid': {
                    title: "Cấu trúc Hybrid Systems (Lai)", subtitle: "Sự kết hợp thực tế hiệu quả",
                    description: "Các hệ điều hành thực tế thường lai giữa nhiều mô hình để đạt cả hiệu suất lẫn tính bảo mật.",
                    details: [
                        { label: "macOS/iOS", content: "Lai giữa Mach microkernel (IPC/Memory) và các dịch vụ từ BSD Unix." },
                        { label: "Android", content: "Nhân Linux kết hợp với ART VM và các native API." }
                    ],
                    img: "./Chuong2/Hybrid.jpg", example: "Windows, macOS, Android, iOS.",
                    imgDesc: "Sơ đồ Android: Linux Kernel -> HAL -> Native Libs -> Apps."
                }
            };
            const active = structures[activeTab];
            return (
                <div className="space-y-12 fade-in max-w-7xl mx-auto pb-20">
                    <div className="bg-white p-10 md:p-12 rounded-[3.5rem] shadow-sm border border-slate-100">
                        <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-8 mb-12">
                            <div>
                                <h2 className="text-2xl font-bold text-slate-800 mb-4 flex items-center gap-4">
                                    <Layers className="text-indigo-600" size={32} /> 5. Cấu trúc Hệ thống
                                </h2>
                                <p className="text-slate-500 mt-4 font-medium text-lg italic">Phân tích chi tiết các kiến trúc thiết kế phổ biến</p>
                            </div>
                            <div className="flex flex-wrap bg-slate-100 p-2 rounded-[2rem] border border-slate-200 shadow-inner">
                                {Object.keys(structures).map(tab => (
                                    <button key={tab} onClick={() => setActiveTab(tab)} className={`px-6 py-3 rounded-[1.5rem] font-black text-xs transition-all duration-500 uppercase tracking-widest ${activeTab === tab ? 'bg-indigo-600 text-white shadow-lg translate-y-[-2px]' : 'text-slate-400 hover:text-slate-600 hover:bg-slate-200/50'}`}>{tab.split(' ')[0]}</button>
                                ))}
                            </div>
                        </div>
                        <div className="grid lg:grid-cols-12 gap-12 slide-up">
                            <div className="lg:col-span-7 space-y-8">
                                <span className="inline-block px-4 py-1.5 bg-indigo-50 text-indigo-600 rounded-full text-xs font-black uppercase tracking-[0.2em]">{active.subtitle}</span>
                                <h3 className="text-2xl font-black text-slate-900 mb-8 italic tracking-tighter leading-tight">{active.title}</h3>
                                <p className="text-lg text-slate-600 leading-relaxed font-medium mb-12 border-l-4 border-indigo-500 pl-6 bg-slate-50 py-4 rounded-r-2xl">{active.description}</p>
                                <div className="space-y-10">
                                    {active.details.map((item, i) => (
                                        <div key={i} className="group transition-all">
                                            <div className="flex items-center gap-4 mb-3">
                                                <div className="w-8 h-8 rounded-xl bg-slate-900 text-white flex items-center justify-center text-xs font-black shadow-lg">0{i + 1}</div>
                                                <h4 className="font-black text-slate-800 uppercase text-xs tracking-widest">{item.label}</h4>
                                            </div>
                                            <p className="text-base text-slate-500 font-medium leading-relaxed ml-12">{item.content}</p>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            <div className="lg:col-span-5 flex flex-col">
                                <div className={`w-full h-full min-h-[500px] rounded-[3rem] overflow-hidden transition-all duration-500 relative ${active.img ? 'bg-white shadow-2xl' : 'bg-slate-50 border-2 border-dashed border-slate-200 flex flex-col items-center justify-center p-10 shadow-inner'}`}>
                                    {active.img ? (
                                        <div className="w-full h-full group relative">
                                            <img src={active.img} alt={active.title} className="w-full h-full object-contain p-4 transition-transform duration-700 group-hover:scale-105" />
                                            <div className="absolute bottom-0 inset-x-0 p-6 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity">
                                                <p className="text-[10px] text-white font-bold uppercase tracking-widest text-center">{active.imgDesc}</p>
                                            </div>
                                        </div>
                                    ) : (
                                        <div className="text-center">
                                            <div className="w-24 h-24 bg-white rounded-3xl shadow-sm flex items-center justify-center text-slate-200 mb-8 mx-auto"><Icon size={56}><rect x="3" y="3" width="18" height="18" rx="2" ry="2" /><circle cx="8.5" cy="8.5" r="1.5" /><polyline points="21 15 16 10 5 21" /></Icon></div>
                                            <h5 className="text-xs font-black text-slate-400 uppercase tracking-[0.3em] mb-4">Sơ đồ {activeTab}</h5>
                                            <p className="text-sm text-slate-400 font-bold italic">"{active.imgDesc}"</p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const EnglishStudy = () => {
            const [view, setView] = useState('flashcard'); // 'flashcard' | 'list'
            const [currentIndex, setCurrentIndex] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);
            const { speak } = useContext(TooltipContext);

            const terms = Object.keys(vocabData);
            const currentTerm = terms[currentIndex];
            const data = vocabData[currentTerm];

            // --- NAVIGATION LOGIC ---
            const handleNext = () => {
                setIsFlipped(false);
                setTimeout(() => setCurrentIndex((prev) => (prev + 1) % terms.length), 150);
            };

            const handlePrev = () => {
                setIsFlipped(false);
                setTimeout(() => setCurrentIndex((prev) => (prev - 1 + terms.length) % terms.length), 150);
            };

            const toggleFlip = () => setIsFlipped(!isFlipped);

            // --- KEYBOARD INTERACTION ---
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (view !== 'flashcard') return;
                    if (e.code === 'Space') { e.preventDefault(); toggleFlip(); }
                    if (e.code === 'ArrowRight') handleNext();
                    if (e.code === 'ArrowLeft') handlePrev();
                    if (e.code === 'KeyV') speak(currentTerm);
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [currentIndex, isFlipped, view]);

            return (
                <div className="max-w-6xl mx-auto pb-16 px-4 fade-in">
                    {/* Header Section */}
                    <div className="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
                        <div className="space-y-2">
                            <div className="inline-flex items-center gap-2 px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-bold uppercase tracking-widest">
                                <Zap size={14} /> Learning Lab
                            </div>
                            <h2 className="text-4xl font-extrabold text-slate-900 tracking-tight">Tiếng Anh chuyên ngành</h2>
                            <p className="text-slate-500 font-medium">Làm chủ tiếng Anh chuyên ngành, chủ đề Hệ điều hành với Flashcards thông minh.</p>
                        </div>

                        <div className="flex bg-slate-200/50 p-1.5 rounded-2xl backdrop-blur-md">
                            <button
                                onClick={() => setView('flashcard')}
                                className={`flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all duration-300 ${view === 'flashcard' ? 'bg-white text-indigo-600 shadow-xl' : 'text-slate-500 hover:text-slate-700'}`}
                            >
                                <BrainCircuit size={18} /> Flashcards
                            </button>
                            <button
                                onClick={() => setView('list')}
                                className={`flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all duration-300 ${view === 'list' ? 'bg-white text-indigo-600 shadow-xl' : 'text-slate-500 hover:text-slate-700'}`}
                            >
                                <Layers size={18} /> Glossary
                            </button>
                        </div>
                    </div>

                    {view === 'flashcard' ? (
                        <div className="flex flex-col items-center">
                            {/* Flashcard Area */}
                            <div className="perspective-2000 w-full max-w-[600px] h-[400px]">
                                <div
                                    onClick={toggleFlip}
                                    className={`relative w-full h-full cursor-pointer transition-transform duration-[700ms] transform-style-3d ${isFlipped ? 'rotate-y-180' : ''}`}
                                >
                                    {/* FRONT: English */}
                                    <div className="absolute inset-0 backface-hidden bg-white rounded-[2.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.05)] border border-slate-100 flex flex-col items-center justify-center p-12 overflow-hidden">
                                        <div className="absolute top-0 right-0 p-8 opacity-5">
                                            <Cpu size={120} />
                                        </div>
                                        <span className="mb-6 px-4 py-1.5 bg-indigo-50 text-indigo-500 rounded-full text-xs font-black uppercase tracking-[0.2em]">English Term</span>
                                        <h3 className="text-5xl font-black text-slate-800 text-center tracking-tighter mb-8">{currentTerm}</h3>
                                        <div className="flex items-center gap-4 group">
                                            <span className="text-xl font-mono text-slate-400">{data.ipa}</span>
                                            <button
                                                onClick={(e) => { e.stopPropagation(); speak(currentTerm); }}
                                                className="w-12 h-12 flex items-center justify-center bg-slate-50 text-slate-400 rounded-full hover:bg-indigo-600 hover:text-white transition-all duration-300 shadow-sm"
                                            >
                                                <Volume2 size={20} />
                                            </button>
                                        </div>
                                        <div className="absolute bottom-8 flex gap-3">
                                            <span className="kbd-hint bg-slate-100 border-none shadow-none text-[9px]">CLICK TO FLIP</span>
                                            <span className="kbd-hint bg-slate-100 border-none shadow-none text-[9px]">SPACE</span>
                                        </div>
                                    </div>

                                    {/* BACK: Vietnamese */}
                                    <div className="absolute inset-0 backface-hidden rotate-y-180 bg-indigo-600 rounded-[2.5rem] shadow-2xl flex flex-col items-center justify-center p-12 text-white text-center">
                                        <div className="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/graphy-dark.png')]"></div>
                                        <span className="mb-6 px-4 py-1.5 bg-white/10 text-white/80 rounded-full text-xs font-black uppercase tracking-[0.2em]">Vietnamese Meaning</span>
                                        <h3 className="text-4xl font-bold mb-6 tracking-tight">{data.vi}</h3>
                                        <div className="w-12 h-1 bg-white/20 rounded-full mb-6"></div>
                                        <p className="text-lg text-indigo-100 leading-relaxed font-medium max-w-[90%] italic">
                                            "{data.desc}"
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* Controls & Progress */}
                            <div className="mt-16 flex items-center gap-12">
                                <button
                                    onClick={handlePrev}
                                    className="w-16 h-16 rounded-2xl bg-white border border-slate-200 text-slate-400 hover:text-indigo-600 hover:border-indigo-600 hover:shadow-2xl transition-all duration-300 flex items-center justify-center group active:scale-90"
                                >
                                    <Icon size={32} className="group-hover:-translate-x-1 transition-transform"><path d="M15 18l-6-6 6-6" /></Icon>
                                </button>

                                <div className="flex flex-col items-center gap-3">
                                    <div className="text-3xl font-black text-slate-800 tracking-tighter">
                                        {String(currentIndex + 1).padStart(2, '0')}
                                        <span className="text-slate-300 mx-2 text-xl font-light">/</span>
                                        {terms.length}
                                    </div>
                                    <div className="w-48 h-1.5 bg-slate-100 rounded-full overflow-hidden">
                                        <div
                                            className="h-full bg-indigo-600 transition-all duration-700 ease-out"
                                            style={{ width: `${((currentIndex + 1) / terms.length) * 100}%` }}
                                        ></div>
                                    </div>
                                </div>

                                <button
                                    onClick={handleNext}
                                    className="w-16 h-16 rounded-2xl bg-indigo-600 text-white hover:bg-slate-900 hover:shadow-2xl transition-all duration-300 flex items-center justify-center group active:scale-90"
                                >
                                    <Icon size={32} className="group-hover:translate-x-1 transition-transform"><path d="M9 18l6-6-6-6" /></Icon>
                                </button>
                            </div>
                        </div>
                    ) : (
                        /* GRID VIEW: Glossy Cards */
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 slide-up">
                            {terms.map((key) => (
                                <div key={key} className="group bg-white p-8 rounded-[2rem] border border-slate-100 shadow-sm hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 relative overflow-hidden">
                                    <div className="absolute top-0 left-0 w-1.5 h-full bg-slate-100 group-hover:bg-indigo-600 transition-colors"></div>
                                    <div className="flex justify-between items-start mb-6">
                                        <div>
                                            <h4 className="text-2xl font-black text-slate-800 tracking-tight group-hover:text-indigo-600 transition-colors capitalize">{key}</h4>
                                            <p className="text-sm font-mono text-slate-400 mt-1">{vocabData[key].ipa}</p>
                                        </div>
                                        <button onClick={() => speak(key)} className="p-3 bg-slate-50 text-slate-400 rounded-xl hover:bg-indigo-50 hover:text-indigo-600 transition-all">
                                            <Volume2 size={20} />
                                        </button>
                                    </div>
                                    <div className="space-y-3">
                                        <span className="inline-block px-3 py-1 bg-emerald-50 text-emerald-600 text-[11px] font-black uppercase rounded-lg">
                                            {vocabData[key].vi}
                                        </span>
                                        <p className="text-sm text-slate-500 leading-relaxed line-clamp-2">
                                            {vocabData[key].desc}
                                        </p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        const QuizSection = () => {
            const qs = [
                { q: "Tiến trình (Process) khác gì so với Chương trình (Program)?", options: ["Program là thực thể động", "Process là một thực thể động (chương trình đang thực thi)", "Cả hai đều giống nhau", "Process là thực thể tĩnh lưu trên đĩa"], a: 1, expl: "Chương trình lưu tĩnh trên đĩa, tiến trình là chương trình đang chạy và cần tài nguyên." },
                { q: "Thành phần quản lý I/O sử dụng cơ chế nào để chồng lấp I/O của một job với chính nó?", options: ["Spooling", "Buffering", "Caching", "Protection"], a: 1, expl: "Buffering dùng vùng đệm trong RAM để chồng lấp I/O của một công việc với việc thực thi chính nó." },
                { q: "Thành phần nào là giao diện chính giúp người dùng trao đổi lệnh với OS?", options: ["Kernel", "Protection System", "Command Interpreter (Shell)", "File Management"], a: 2, expl: "Shell (dòng lệnh) hoặc GUI là giao diện thông dịch lệnh cho người dùng." },
                { q: "Có mấy cách truyền tham số cho System Call?", options: ["1 cách duy nhất", "2 cách", "3 cách (Register, Memory, Stack)", "Vô số cách"], a: 2, expl: "Có 3 cách chính: Gửi qua thanh ghi, qua địa chỉ vùng nhớ trung gian hoặc qua ngăn xếp (Stack) ." },
                { q: "Kiến trúc nào chuyển các thành phần không thiết yếu sang 'không gian người dùng'?", options: ["Monolithic", "Layered", "Microkernel", "Modules"], a: 2, expl: "Microkernel thu gọn nhân tối giản để tăng tính an toàn và dễ mở rộng." },
                { q: "Dịch vụ OS nào giúp lưu vết người dùng để thống kê hoặc tính phí sử dụng?", options: ["Accounting (Kế toán)", "Protection", "Error Detection", "Communication"], a: 0, expl: "Accounting theo dõi tài nguyên đã sử dụng của người dùng." },
                { q: "Hệ Điều Hành macOS và iOS được phát triển dựa trên nhân (kernel) nào?", options: ["Mach", "Linux", "Darwin (lai Mach/BSD)", "Windows NT"], a: 2, expl: "macOS dựa trên môi trường nhân Darwin (lai giữa Mach microkernel và BSD Unix)." },
                { q: "API tiêu chuẩn dành cho các hệ điều hành họ UNIX và Linux là?", options: ["Win32 API", "Java API", "POSIX API", "ART Framework"], a: 2, expl: "POSIX API là tiêu chuẩn cho hệ thống dựa trên Unix/Linux." },
                { q: "Chương trình nào chịu trách nhiệm nạp và thực thi chương trình ứng dụng?", options: ["Editor", "Loader", "Compiler", "Debugger"], a: 1, expl: "Loader nạp chương trình vào RAM để thực thi." },
                { q: "Lệnh 'Copy/Paste' thuộc thành phần quản lý nào?", options: ["Quản lý tiến trình", "Quản lý File", "Quản lý I/O", "Hệ thống bảo vệ"], a: 1, expl: "Các thao tác xử lý tập tin thuộc về File Management." }
            ];
            const [ans, setAns] = useState({}); const [sub, setSub] = useState(false);
            const score = Object.keys(ans).reduce((acc, k) => acc + (ans[k] === qs[k].a ? 1 : 0), 0);
            return (
                <div className="max-w-4xl mx-auto pb-20 px-4 slide-up">
                    <div className="bg-white p-10 rounded-[2.5rem] shadow-sm border border-slate-100 mb-8 flex justify-between items-center">
                        <h2 className="text-2xl font-bold text-slate-800 mb-4 flex items-center gap-4">
                            <Shield className="text-indigo-600" size={32} /> Kiểm tra Chương 2
                        </h2>
                        {sub && <div className="text-3xl font-black text-indigo-600">{score}/{qs.length}</div>}
                    </div>
                    <div className="space-y-6">{qs.map((q, i) => (
                        <div key={i} className="bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm transition-all hover:shadow-md">
                            <p className="font-bold text-slate-800 mb-6 flex gap-3 leading-snug"><span className="text-indigo-600 font-black">Q{i + 1}.</span> {q.q}</p>
                            <div className="grid gap-3 pl-8">{q.options.map((o, oi) => {
                                let s = "text-left p-4 rounded-2xl border-2 font-bold text-sm transition-all ";
                                if (sub) { if (oi === q.a) s += "bg-emerald-50 border-emerald-500 text-emerald-700"; else if (ans[i] === oi) s += "bg-red-50 border-red-500 text-red-700 opacity-60"; else s += "border-slate-50 text-slate-300"; }
                                else s += ans[i] === oi ? "bg-indigo-50 border-indigo-600 text-indigo-700 shadow-md" : "border-slate-50 text-slate-500 hover:border-indigo-200";
                                return <button key={oi} onClick={() => !sub && setAns({ ...ans, [i]: oi })} className={s}>{o}</button>;
                            })}</div>
                            {sub && <div className="mt-6 ml-8 p-4 bg-indigo-50/50 rounded-xl text-xs text-indigo-800 italic border border-indigo-100"><b>Phân tích:</b> {q.expl}</div>}
                        </div>
                    ))}</div>
                    {!sub ? <button onClick={() => { window.scrollTo({ top: 0, behavior: 'smooth' }); setSub(true) }} disabled={Object.keys(ans).length < qs.length} className="w-full mt-10 p-5 bg-indigo-600 text-white rounded-[2rem] font-black shadow-2xl disabled:opacity-30 transform hover:-translate-y-1 transition-all active:scale-95">NỘP BÀI KIỂM TRA</button> : <button onClick={() => { setSub(false); setAns({}); }} className="w-full mt-10 p-5 bg-slate-800 text-white rounded-[2rem] font-black shadow-2xl">THỬ THÁCH LẠI</button>}
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('components');
            const renderContent = () => {
                switch (activeTab) {
                    case 'components': return <ComponentsSection />;
                    case 'services': return <ServicesSection />;
                    case 'syscall': return <SysCallSection />;
                    case 'programs': return (
                        <div className="p-10 bg-white rounded-[2.5rem] shadow-sm border border-slate-100 max-w-5xl mx-auto fade-in">
                            <h2 className="text-2xl font-bold text-slate-800 mb-4 flex items-center gap-4">
                                <Cpu className="text-indigo-600" size={32} /> 4. Chương trình Hệ thống
                            </h2>
                            <p className="text-slate-500 mb-10 font-medium italic">"Cung cấp môi trường tiện lợi để phát triển và thực thi chương trình mà không cần gọi System Call trực tiếp".</p>
                            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {[{ t: "Quản lý File", d: "Tạo, xóa, đổi tên, liệt kê file/thư mục." }, { t: "Thông tin trạng thái", d: "Xem ngày giờ, dung lượng đĩa trống." }, { t: "Soạn thảo File", d: "Các editor văn bản." }, { t: "Hỗ trợ ngôn ngữ", d: "Compiler, Assembler." }, { t: "Thực thi & Tìm lỗi", d: "Loader nạp chương trình, Debugger giúp tìm lỗi." }, { t: "Giao tiếp", d: "Email, trình duyệt web." }].map((p, i) => (
                                    <div key={i} className="group p-6 bg-slate-50 rounded-3xl border border-slate-100 hover:bg-white hover:shadow-xl transition-all">
                                        <h4 className="font-black text-indigo-600 mb-2">{p.t}</h4>
                                        <p className="text-[11px] text-slate-500 font-bold leading-relaxed">{p.d}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    );
                    case 'architecture': return <StructureSection />;
                    case 'english': return <EnglishStudy />;
                    case 'quiz': return <QuizSection />;
                    default: return <ComponentsSection />;
                }
            };
            return (
                <TooltipProvider>
                    <div className="flex flex-col md:flex-row min-h-screen bg-[#fbfcfd]">
                        <Sidebar activeTab={activeTab} setActiveTab={setActiveTab} />
                        <main className="flex-1 overflow-y-auto h-screen relative scroll-smooth custom-scrollbar-light p-4 md:p-12">{renderContent()}</main>
                    </div>
                </TooltipProvider>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>